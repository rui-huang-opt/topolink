<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>topolink API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Graph">Graph</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Graph.__init__">Graph</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.from_mixing_matrix">from_mixing_matrix</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.nodes">nodes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.edges">edges</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.number_of_nodes">number_of_nodes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.number_of_edges">number_of_edges</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.is_connected">is_connected</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_nodes">add_nodes</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_edges">add_edges</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.draw">draw</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.adjacency">adjacency</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.deploy">deploy</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#NodeHandle">NodeHandle</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#NodeHandle.__init__">NodeHandle</a>
                        </li>
                        <li>
                                <a class="variable" href="#NodeHandle.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#NodeHandle.num_neighbors">num_neighbors</a>
                        </li>
                        <li>
                                <a class="variable" href="#NodeHandle.neighbor_names">neighbor_names</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.send_to_all">send_to_all</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.broadcast">broadcast</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.gather">gather</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.weighted_gather">weighted_gather</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.laplacian">laplacian</a>
                        </li>
                        <li>
                                <a class="function" href="#NodeHandle.weighted_mix">weighted_mix</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#NodeInput">NodeInput</a>
            </li>
            <li>
                    <a class="variable" href="#EdgeInput">EdgeInput</a>
            </li>
            <li>
                    <a class="variable" href="#NodeView">NodeView</a>
            </li>
            <li>
                    <a class="variable" href="#EdgeView">EdgeView</a>
            </li>
            <li>
                    <a class="variable" href="#AdjView">AdjView</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
topolink    </h1>

                
                        <input id="mod-topolink-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-topolink-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">Graph</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.node_handle</span><span class="w"> </span><span class="kn">import</span> <span class="n">NodeHandle</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">NodeInput</span><span class="p">,</span> <span class="n">EdgeInput</span><span class="p">,</span> <span class="n">NodeView</span><span class="p">,</span> <span class="n">EdgeView</span><span class="p">,</span> <span class="n">AdjView</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>    <span class="s2">&quot;Graph&quot;</span><span class="p">,</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a>    <span class="s2">&quot;NodeHandle&quot;</span><span class="p">,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a>    <span class="s2">&quot;NodeInput&quot;</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>    <span class="s2">&quot;EdgeInput&quot;</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>    <span class="s2">&quot;NodeView&quot;</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>    <span class="s2">&quot;EdgeView&quot;</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a>    <span class="s2">&quot;AdjView&quot;</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="Graph">
                            <input id="Graph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Graph</span>:

                <label class="view-source-button" for="Graph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph-16"><a href="#Graph-16"><span class="linenos"> 16</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Graph</span><span class="p">:</span>
</span><span id="Graph-17"><a href="#Graph-17"><span class="linenos"> 17</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-18"><a href="#Graph-18"><span class="linenos"> 18</span></a><span class="sd">    Represents a network topology using a NetworkX graph and provides methods for managing nodes, edges, and network deployment.</span>
</span><span id="Graph-19"><a href="#Graph-19"><span class="linenos"> 19</span></a>
</span><span id="Graph-20"><a href="#Graph-20"><span class="linenos"> 20</span></a><span class="sd">    Parameters</span>
</span><span id="Graph-21"><a href="#Graph-21"><span class="linenos"> 21</span></a><span class="sd">    ----------</span>
</span><span id="Graph-22"><a href="#Graph-22"><span class="linenos"> 22</span></a><span class="sd">    nodes : NodeInput | None, optional</span>
</span><span id="Graph-23"><a href="#Graph-23"><span class="linenos"> 23</span></a><span class="sd">        An iterable of node names to initialize the graph. If None, the graph starts empty.</span>
</span><span id="Graph-24"><a href="#Graph-24"><span class="linenos"> 24</span></a><span class="sd">    edges : EdgeInput | None, optional</span>
</span><span id="Graph-25"><a href="#Graph-25"><span class="linenos"> 25</span></a><span class="sd">        An iterable of edges (tuples of node names) to initialize the graph. If None, the graph starts with no edges.</span>
</span><span id="Graph-26"><a href="#Graph-26"><span class="linenos"> 26</span></a><span class="sd">    *args : Any</span>
</span><span id="Graph-27"><a href="#Graph-27"><span class="linenos"> 27</span></a><span class="sd">        Additional positional arguments (not used).</span>
</span><span id="Graph-28"><a href="#Graph-28"><span class="linenos"> 28</span></a><span class="sd">    **kwargs : Any</span>
</span><span id="Graph-29"><a href="#Graph-29"><span class="linenos"> 29</span></a><span class="sd">        Additional keyword arguments. If &#39;nx_graph&#39; is provided, it will be used directly as the internal graph representation.</span>
</span><span id="Graph-30"><a href="#Graph-30"><span class="linenos"> 30</span></a>
</span><span id="Graph-31"><a href="#Graph-31"><span class="linenos"> 31</span></a><span class="sd">    Attributes</span>
</span><span id="Graph-32"><a href="#Graph-32"><span class="linenos"> 32</span></a><span class="sd">    ----------</span>
</span><span id="Graph-33"><a href="#Graph-33"><span class="linenos"> 33</span></a><span class="sd">    nodes : NodeView</span>
</span><span id="Graph-34"><a href="#Graph-34"><span class="linenos"> 34</span></a><span class="sd">        A view of the nodes in the graph.</span>
</span><span id="Graph-35"><a href="#Graph-35"><span class="linenos"> 35</span></a><span class="sd">    edges : EdgeView</span>
</span><span id="Graph-36"><a href="#Graph-36"><span class="linenos"> 36</span></a><span class="sd">        A view of the edges in the graph.</span>
</span><span id="Graph-37"><a href="#Graph-37"><span class="linenos"> 37</span></a><span class="sd">    number_of_nodes : int</span>
</span><span id="Graph-38"><a href="#Graph-38"><span class="linenos"> 38</span></a><span class="sd">        The number of nodes in the graph.</span>
</span><span id="Graph-39"><a href="#Graph-39"><span class="linenos"> 39</span></a><span class="sd">    number_of_edges : int</span>
</span><span id="Graph-40"><a href="#Graph-40"><span class="linenos"> 40</span></a><span class="sd">        The number of edges in the graph.</span>
</span><span id="Graph-41"><a href="#Graph-41"><span class="linenos"> 41</span></a><span class="sd">    is_connected : bool</span>
</span><span id="Graph-42"><a href="#Graph-42"><span class="linenos"> 42</span></a><span class="sd">        Indicates whether the graph is connected.</span>
</span><span id="Graph-43"><a href="#Graph-43"><span class="linenos"> 43</span></a>
</span><span id="Graph-44"><a href="#Graph-44"><span class="linenos"> 44</span></a><span class="sd">    Methods</span>
</span><span id="Graph-45"><a href="#Graph-45"><span class="linenos"> 45</span></a><span class="sd">    -------</span>
</span><span id="Graph-46"><a href="#Graph-46"><span class="linenos"> 46</span></a><span class="sd">    from_mixing_matrix(mixing_matrix, nodes=None) -&gt; &quot;Graph&quot;</span>
</span><span id="Graph-47"><a href="#Graph-47"><span class="linenos"> 47</span></a><span class="sd">        Alternative constructor to create a Graph from a symmetric, double-stochastic mixing matrix.</span>
</span><span id="Graph-48"><a href="#Graph-48"><span class="linenos"> 48</span></a><span class="sd">    add_nodes(nodes) -&gt; None</span>
</span><span id="Graph-49"><a href="#Graph-49"><span class="linenos"> 49</span></a><span class="sd">        Adds nodes to the graph.</span>
</span><span id="Graph-50"><a href="#Graph-50"><span class="linenos"> 50</span></a><span class="sd">    add_edges(edges) -&gt; None</span>
</span><span id="Graph-51"><a href="#Graph-51"><span class="linenos"> 51</span></a><span class="sd">        Adds edges to the graph.</span>
</span><span id="Graph-52"><a href="#Graph-52"><span class="linenos"> 52</span></a><span class="sd">    draw(ax, **kwargs) -&gt; None</span>
</span><span id="Graph-53"><a href="#Graph-53"><span class="linenos"> 53</span></a><span class="sd">        Draws the graph on a given matplotlib Axes.</span>
</span><span id="Graph-54"><a href="#Graph-54"><span class="linenos"> 54</span></a><span class="sd">    adjacency(node) -&gt; AdjView</span>
</span><span id="Graph-55"><a href="#Graph-55"><span class="linenos"> 55</span></a><span class="sd">        Returns the adjacency view for a specified node.</span>
</span><span id="Graph-56"><a href="#Graph-56"><span class="linenos"> 56</span></a><span class="sd">    deploy() -&gt; None</span>
</span><span id="Graph-57"><a href="#Graph-57"><span class="linenos"> 57</span></a><span class="sd">        Deploys the network topology by registering nodes, notifying them of their neighbors, and unregistering nodes.</span>
</span><span id="Graph-58"><a href="#Graph-58"><span class="linenos"> 58</span></a>
</span><span id="Graph-59"><a href="#Graph-59"><span class="linenos"> 59</span></a><span class="sd">    Notes</span>
</span><span id="Graph-60"><a href="#Graph-60"><span class="linenos"> 60</span></a><span class="sd">    -----</span>
</span><span id="Graph-61"><a href="#Graph-61"><span class="linenos"> 61</span></a><span class="sd">    - Uses ZeroMQ for communication between nodes and a central registry.</span>
</span><span id="Graph-62"><a href="#Graph-62"><span class="linenos"> 62</span></a><span class="sd">    - The graph must be connected before deployment.</span>
</span><span id="Graph-63"><a href="#Graph-63"><span class="linenos"> 63</span></a><span class="sd">    - The `nx_graph` keyword argument is intended for internal use only and should not be set from outside this package.</span>
</span><span id="Graph-64"><a href="#Graph-64"><span class="linenos"> 64</span></a><span class="sd">    - The `from_mixing_matrix` method provides a convenient way to create a graph from a mixing matrix, ensuring the matrix is symmetric and double-stochastic.</span>
</span><span id="Graph-65"><a href="#Graph-65"><span class="linenos"> 65</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Graph-66"><a href="#Graph-66"><span class="linenos"> 66</span></a>
</span><span id="Graph-67"><a href="#Graph-67"><span class="linenos"> 67</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Graph-68"><a href="#Graph-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Graph-69"><a href="#Graph-69"><span class="linenos"> 69</span></a>        <span class="n">nodes</span><span class="p">:</span> <span class="n">NodeInput</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph-70"><a href="#Graph-70"><span class="linenos"> 70</span></a>        <span class="n">edges</span><span class="p">:</span> <span class="n">EdgeInput</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph-71"><a href="#Graph-71"><span class="linenos"> 71</span></a>        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Graph-72"><a href="#Graph-72"><span class="linenos"> 72</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Graph-73"><a href="#Graph-73"><span class="linenos"> 73</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-74"><a href="#Graph-74"><span class="linenos"> 74</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="Graph-75"><a href="#Graph-75"><span class="linenos"> 75</span></a>
</span><span id="Graph-76"><a href="#Graph-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;topolink.Graph&quot;</span><span class="p">)</span>
</span><span id="Graph-77"><a href="#Graph-77"><span class="linenos"> 77</span></a>
</span><span id="Graph-78"><a href="#Graph-78"><span class="linenos"> 78</span></a>        <span class="c1"># If a NetworkX graph is provided, use it directly.</span>
</span><span id="Graph-79"><a href="#Graph-79"><span class="linenos"> 79</span></a>        <span class="c1"># Note: The `nx_graph` attribute is intended for internal use only and should not be set from outside this package.</span>
</span><span id="Graph-80"><a href="#Graph-80"><span class="linenos"> 80</span></a>        <span class="c1"># It is primarily used by alternative constructors (such as from_mixing_matrix) to initialize the graph structure efficiently.</span>
</span><span id="Graph-81"><a href="#Graph-81"><span class="linenos"> 81</span></a>        <span class="k">if</span> <span class="s2">&quot;nx_graph&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
</span><span id="Graph-82"><a href="#Graph-82"><span class="linenos"> 82</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;nx_graph&quot;</span><span class="p">]</span>
</span><span id="Graph-83"><a href="#Graph-83"><span class="linenos"> 83</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Graph-84"><a href="#Graph-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="Graph-85"><a href="#Graph-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">nodes</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="Graph-86"><a href="#Graph-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="Graph-87"><a href="#Graph-87"><span class="linenos"> 87</span></a>
</span><span id="Graph-88"><a href="#Graph-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">()</span>
</span><span id="Graph-89"><a href="#Graph-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span> <span class="o">=</span> <span class="n">RegistryAdvertiser</span><span class="p">()</span>
</span><span id="Graph-90"><a href="#Graph-90"><span class="linenos"> 90</span></a>
</span><span id="Graph-91"><a href="#Graph-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_host</span> <span class="o">=</span> <span class="n">get_local_ip</span><span class="p">()</span>
</span><span id="Graph-92"><a href="#Graph-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setup_router</span><span class="p">()</span>
</span><span id="Graph-93"><a href="#Graph-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)</span>
</span><span id="Graph-94"><a href="#Graph-94"><span class="linenos"> 94</span></a>
</span><span id="Graph-95"><a href="#Graph-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_addresses</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-96"><a href="#Graph-96"><span class="linenos"> 96</span></a>
</span><span id="Graph-97"><a href="#Graph-97"><span class="linenos"> 97</span></a>    <span class="nd">@classmethod</span>
</span><span id="Graph-98"><a href="#Graph-98"><span class="linenos"> 98</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_mixing_matrix</span><span class="p">(</span>
</span><span id="Graph-99"><a href="#Graph-99"><span class="linenos"> 99</span></a>        <span class="bp">cls</span><span class="p">,</span> <span class="n">mixing_matrix</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Graph-100"><a href="#Graph-100"><span class="linenos">100</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Graph&quot;</span><span class="p">:</span>
</span><span id="Graph-101"><a href="#Graph-101"><span class="linenos">101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-102"><a href="#Graph-102"><span class="linenos">102</span></a><span class="sd">        Create a Graph instance from a mixing matrix.</span>
</span><span id="Graph-103"><a href="#Graph-103"><span class="linenos">103</span></a><span class="sd">        The mixing matrix must be symmetric and double-stochastic.</span>
</span><span id="Graph-104"><a href="#Graph-104"><span class="linenos">104</span></a>
</span><span id="Graph-105"><a href="#Graph-105"><span class="linenos">105</span></a><span class="sd">        Parameters</span>
</span><span id="Graph-106"><a href="#Graph-106"><span class="linenos">106</span></a><span class="sd">        ----------</span>
</span><span id="Graph-107"><a href="#Graph-107"><span class="linenos">107</span></a><span class="sd">        mixing_matrix : NDArray[float64]</span>
</span><span id="Graph-108"><a href="#Graph-108"><span class="linenos">108</span></a><span class="sd">            A square matrix representing the mixing coefficients between nodes.</span>
</span><span id="Graph-109"><a href="#Graph-109"><span class="linenos">109</span></a><span class="sd">        nodes : list[str], optional</span>
</span><span id="Graph-110"><a href="#Graph-110"><span class="linenos">110</span></a><span class="sd">            A list of self defined node names. If not provided, nodes will be named sequentially as &quot;1&quot;, &quot;2&quot;, ..., &quot;n&quot;.</span>
</span><span id="Graph-111"><a href="#Graph-111"><span class="linenos">111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-112"><a href="#Graph-112"><span class="linenos">112</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">mixing_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
</span><span id="Graph-113"><a href="#Graph-113"><span class="linenos">113</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The mixing matrix must be symmetric.&quot;</span><span class="p">)</span>
</span><span id="Graph-114"><a href="#Graph-114"><span class="linenos">114</span></a>
</span><span id="Graph-115"><a href="#Graph-115"><span class="linenos">115</span></a>        <span class="n">ones_vec</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Graph-116"><a href="#Graph-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">np_sum</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">ones_vec</span><span class="p">):</span>
</span><span id="Graph-117"><a href="#Graph-117"><span class="linenos">117</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The mixing matrix must be double-stochastic.&quot;</span><span class="p">)</span>
</span><span id="Graph-118"><a href="#Graph-118"><span class="linenos">118</span></a>
</span><span id="Graph-119"><a href="#Graph-119"><span class="linenos">119</span></a>        <span class="n">nodelist</span> <span class="o">=</span> <span class="n">nodes</span> <span class="ow">or</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
</span><span id="Graph-120"><a href="#Graph-120"><span class="linenos">120</span></a>
</span><span id="Graph-121"><a href="#Graph-121"><span class="linenos">121</span></a>        <span class="n">nx_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_numpy_array</span><span class="p">(</span>
</span><span id="Graph-122"><a href="#Graph-122"><span class="linenos">122</span></a>            <span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">create_using</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">,</span> <span class="n">nodelist</span><span class="o">=</span><span class="n">nodelist</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="Graph-123"><a href="#Graph-123"><span class="linenos">123</span></a>        <span class="p">)</span>
</span><span id="Graph-124"><a href="#Graph-124"><span class="linenos">124</span></a>        <span class="n">nx_graph</span><span class="o">.</span><span class="n">remove_edges_from</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">selfloop_edges</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">))</span>
</span><span id="Graph-125"><a href="#Graph-125"><span class="linenos">125</span></a>
</span><span id="Graph-126"><a href="#Graph-126"><span class="linenos">126</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">nx_graph</span><span class="o">=</span><span class="n">nx_graph</span><span class="p">)</span>
</span><span id="Graph-127"><a href="#Graph-127"><span class="linenos">127</span></a>
</span><span id="Graph-128"><a href="#Graph-128"><span class="linenos">128</span></a>    <span class="nd">@property</span>
</span><span id="Graph-129"><a href="#Graph-129"><span class="linenos">129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeView</span><span class="p">:</span>
</span><span id="Graph-130"><a href="#Graph-130"><span class="linenos">130</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">nodes</span>
</span><span id="Graph-131"><a href="#Graph-131"><span class="linenos">131</span></a>
</span><span id="Graph-132"><a href="#Graph-132"><span class="linenos">132</span></a>    <span class="nd">@property</span>
</span><span id="Graph-133"><a href="#Graph-133"><span class="linenos">133</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EdgeView</span><span class="p">:</span>
</span><span id="Graph-134"><a href="#Graph-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">edges</span>
</span><span id="Graph-135"><a href="#Graph-135"><span class="linenos">135</span></a>
</span><span id="Graph-136"><a href="#Graph-136"><span class="linenos">136</span></a>    <span class="nd">@property</span>
</span><span id="Graph-137"><a href="#Graph-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Graph-138"><a href="#Graph-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">()</span>
</span><span id="Graph-139"><a href="#Graph-139"><span class="linenos">139</span></a>
</span><span id="Graph-140"><a href="#Graph-140"><span class="linenos">140</span></a>    <span class="nd">@property</span>
</span><span id="Graph-141"><a href="#Graph-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Graph-142"><a href="#Graph-142"><span class="linenos">142</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">()</span>
</span><span id="Graph-143"><a href="#Graph-143"><span class="linenos">143</span></a>
</span><span id="Graph-144"><a href="#Graph-144"><span class="linenos">144</span></a>    <span class="nd">@property</span>
</span><span id="Graph-145"><a href="#Graph-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Graph-146"><a href="#Graph-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="n">nx</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">)</span>
</span><span id="Graph-147"><a href="#Graph-147"><span class="linenos">147</span></a>
</span><span id="Graph-148"><a href="#Graph-148"><span class="linenos">148</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">NodeInput</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-149"><a href="#Graph-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</span><span id="Graph-150"><a href="#Graph-150"><span class="linenos">150</span></a>
</span><span id="Graph-151"><a href="#Graph-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edges</span><span class="p">:</span> <span class="n">EdgeInput</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-152"><a href="#Graph-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
</span><span id="Graph-153"><a href="#Graph-153"><span class="linenos">153</span></a>
</span><span id="Graph-154"><a href="#Graph-154"><span class="linenos">154</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">Axes</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-155"><a href="#Graph-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-156"><a href="#Graph-156"><span class="linenos">156</span></a><span class="sd">        Draws the graph using NetworkX&#39;s drawing functionality on the provided matplotlib Axes.</span>
</span><span id="Graph-157"><a href="#Graph-157"><span class="linenos">157</span></a>
</span><span id="Graph-158"><a href="#Graph-158"><span class="linenos">158</span></a><span class="sd">        Parameters:</span>
</span><span id="Graph-159"><a href="#Graph-159"><span class="linenos">159</span></a><span class="sd">            ax (Axes): A matplotlib Axes object where the graph will be drawn.</span>
</span><span id="Graph-160"><a href="#Graph-160"><span class="linenos">160</span></a><span class="sd">            **kwargs: Additional keyword arguments passed to `networkx.draw` for customizing the drawing.</span>
</span><span id="Graph-161"><a href="#Graph-161"><span class="linenos">161</span></a>
</span><span id="Graph-162"><a href="#Graph-162"><span class="linenos">162</span></a><span class="sd">        Returns:</span>
</span><span id="Graph-163"><a href="#Graph-163"><span class="linenos">163</span></a><span class="sd">            None</span>
</span><span id="Graph-164"><a href="#Graph-164"><span class="linenos">164</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-165"><a href="#Graph-165"><span class="linenos">165</span></a>        <span class="n">nx_graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span>
</span><span id="Graph-166"><a href="#Graph-166"><span class="linenos">166</span></a>
</span><span id="Graph-167"><a href="#Graph-167"><span class="linenos">167</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">)</span>
</span><span id="Graph-168"><a href="#Graph-168"><span class="linenos">168</span></a>
</span><span id="Graph-169"><a href="#Graph-169"><span class="linenos">169</span></a>        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">,</span> <span class="s2">&quot;ax&quot;</span><span class="p">:</span> <span class="n">ax</span><span class="p">,</span> <span class="s2">&quot;with_labels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</span><span id="Graph-170"><a href="#Graph-170"><span class="linenos">170</span></a>        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Graph-171"><a href="#Graph-171"><span class="linenos">171</span></a>
</span><span id="Graph-172"><a href="#Graph-172"><span class="linenos">172</span></a>        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="Graph-173"><a href="#Graph-173"><span class="linenos">173</span></a>
</span><span id="Graph-174"><a href="#Graph-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AdjView</span><span class="p">:</span>
</span><span id="Graph-175"><a href="#Graph-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-176"><a href="#Graph-176"><span class="linenos">176</span></a><span class="sd">        Returns the adjacency view of the specified node in the graph.</span>
</span><span id="Graph-177"><a href="#Graph-177"><span class="linenos">177</span></a>
</span><span id="Graph-178"><a href="#Graph-178"><span class="linenos">178</span></a><span class="sd">        Parameters:</span>
</span><span id="Graph-179"><a href="#Graph-179"><span class="linenos">179</span></a><span class="sd">            node (str): The identifier of the node whose adjacency is to be retrieved.</span>
</span><span id="Graph-180"><a href="#Graph-180"><span class="linenos">180</span></a>
</span><span id="Graph-181"><a href="#Graph-181"><span class="linenos">181</span></a><span class="sd">        Returns:</span>
</span><span id="Graph-182"><a href="#Graph-182"><span class="linenos">182</span></a><span class="sd">            AdjView: A view of the adjacent nodes and edge data for the given node.</span>
</span><span id="Graph-183"><a href="#Graph-183"><span class="linenos">183</span></a>
</span><span id="Graph-184"><a href="#Graph-184"><span class="linenos">184</span></a><span class="sd">        Raises:</span>
</span><span id="Graph-185"><a href="#Graph-185"><span class="linenos">185</span></a><span class="sd">            KeyError: If the specified node does not exist in the graph.</span>
</span><span id="Graph-186"><a href="#Graph-186"><span class="linenos">186</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-187"><a href="#Graph-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
</span><span id="Graph-188"><a href="#Graph-188"><span class="linenos">188</span></a>
</span><span id="Graph-189"><a href="#Graph-189"><span class="linenos">189</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_neighbor_info_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">NeighborInfo</span><span class="p">]:</span>
</span><span id="Graph-190"><a href="#Graph-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-191"><a href="#Graph-191"><span class="linenos">191</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2"> is not part of the graph.&quot;</span><span class="p">)</span>
</span><span id="Graph-192"><a href="#Graph-192"><span class="linenos">192</span></a>
</span><span id="Graph-193"><a href="#Graph-193"><span class="linenos">193</span></a>        <span class="n">neighbor_info_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-194"><a href="#Graph-194"><span class="linenos">194</span></a>        <span class="n">adjacency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjacency</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span id="Graph-195"><a href="#Graph-195"><span class="linenos">195</span></a>        <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">adjacency</span><span class="p">:</span>
</span><span id="Graph-196"><a href="#Graph-196"><span class="linenos">196</span></a>            <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_addresses</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">neighbor</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Graph-197"><a href="#Graph-197"><span class="linenos">197</span></a>
</span><span id="Graph-198"><a href="#Graph-198"><span class="linenos">198</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span><span class="p">:</span>
</span><span id="Graph-199"><a href="#Graph-199"><span class="linenos">199</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">neighbor</span><span class="si">}</span><span class="s2"> is not registered.&quot;</span><span class="p">)</span>
</span><span id="Graph-200"><a href="#Graph-200"><span class="linenos">200</span></a>
</span><span id="Graph-201"><a href="#Graph-201"><span class="linenos">201</span></a>            <span class="n">weight</span> <span class="o">=</span> <span class="n">adjacency</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;weight&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="Graph-202"><a href="#Graph-202"><span class="linenos">202</span></a>            <span class="n">n_info</span> <span class="o">=</span> <span class="n">NeighborInfo</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
</span><span id="Graph-203"><a href="#Graph-203"><span class="linenos">203</span></a>            <span class="n">neighbor_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_info</span><span class="p">)</span>
</span><span id="Graph-204"><a href="#Graph-204"><span class="linenos">204</span></a>
</span><span id="Graph-205"><a href="#Graph-205"><span class="linenos">205</span></a>        <span class="k">return</span> <span class="n">neighbor_info_list</span>
</span><span id="Graph-206"><a href="#Graph-206"><span class="linenos">206</span></a>
</span><span id="Graph-207"><a href="#Graph-207"><span class="linenos">207</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">deploy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-208"><a href="#Graph-208"><span class="linenos">208</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-209"><a href="#Graph-209"><span class="linenos">209</span></a><span class="sd">        Deploys the network topology by registering nodes, notifying them of their neighbors,</span>
</span><span id="Graph-210"><a href="#Graph-210"><span class="linenos">210</span></a><span class="sd">        and then unregistering the nodes. Ensures that the topology is connected before deployment.</span>
</span><span id="Graph-211"><a href="#Graph-211"><span class="linenos">211</span></a><span class="sd">        Cleans up resources by closing the router and terminating the context after deployment.</span>
</span><span id="Graph-212"><a href="#Graph-212"><span class="linenos">212</span></a>
</span><span id="Graph-213"><a href="#Graph-213"><span class="linenos">213</span></a><span class="sd">        Raises:</span>
</span><span id="Graph-214"><a href="#Graph-214"><span class="linenos">214</span></a><span class="sd">            ValueError: If the topology is not connected.</span>
</span><span id="Graph-215"><a href="#Graph-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-216"><a href="#Graph-216"><span class="linenos">216</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Graph-217"><a href="#Graph-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_connected</span><span class="p">:</span>
</span><span id="Graph-218"><a href="#Graph-218"><span class="linenos">218</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The provided topology must be connected.&quot;</span><span class="p">)</span>
</span><span id="Graph-219"><a href="#Graph-219"><span class="linenos">219</span></a>
</span><span id="Graph-220"><a href="#Graph-220"><span class="linenos">220</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_nodes</span><span class="p">()</span>
</span><span id="Graph-221"><a href="#Graph-221"><span class="linenos">221</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_nodes_their_neighbors</span><span class="p">()</span>
</span><span id="Graph-222"><a href="#Graph-222"><span class="linenos">222</span></a>            <span class="c1"># TODO: More deployment logic can be added here if needed.</span>
</span><span id="Graph-223"><a href="#Graph-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_unregister_nodes</span><span class="p">()</span>
</span><span id="Graph-224"><a href="#Graph-224"><span class="linenos">224</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Graph-225"><a href="#Graph-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Graph-226"><a href="#Graph-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">term</span><span class="p">()</span>
</span><span id="Graph-227"><a href="#Graph-227"><span class="linenos">227</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span><span class="o">.</span><span class="n">unregister</span><span class="p">()</span>
</span><span id="Graph-228"><a href="#Graph-228"><span class="linenos">228</span></a>
</span><span id="Graph-229"><a href="#Graph-229"><span class="linenos">229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_setup_router</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">SyncSocket</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
</span><span id="Graph-230"><a href="#Graph-230"><span class="linenos">230</span></a>        <span class="n">router</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">ROUTER</span><span class="p">)</span>
</span><span id="Graph-231"><a href="#Graph-231"><span class="linenos">231</span></a>        <span class="n">port</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">bind_to_random_port</span><span class="p">(</span><span class="s2">&quot;tcp://*&quot;</span><span class="p">)</span>
</span><span id="Graph-232"><a href="#Graph-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registry running on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-233"><a href="#Graph-233"><span class="linenos">233</span></a>
</span><span id="Graph-234"><a href="#Graph-234"><span class="linenos">234</span></a>        <span class="k">return</span> <span class="n">router</span><span class="p">,</span> <span class="n">port</span>
</span><span id="Graph-235"><a href="#Graph-235"><span class="linenos">235</span></a>
</span><span id="Graph-236"><a href="#Graph-236"><span class="linenos">236</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-237"><a href="#Graph-237"><span class="linenos">237</span></a>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_registered_addresses</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">:</span>
</span><span id="Graph-238"><a href="#Graph-238"><span class="linenos">238</span></a>            <span class="n">name_bytes</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">address_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">recv_multipart</span><span class="p">()</span>
</span><span id="Graph-239"><a href="#Graph-239"><span class="linenos">239</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">name_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="Graph-240"><a href="#Graph-240"><span class="linenos">240</span></a>
</span><span id="Graph-241"><a href="#Graph-241"><span class="linenos">241</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-242"><a href="#Graph-242"><span class="linenos">242</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown node </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> tried to register&quot;</span><span class="p">)</span>
</span><span id="Graph-243"><a href="#Graph-243"><span class="linenos">243</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">name_bytes</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;Error: Unknown node&quot;</span><span class="p">])</span>
</span><span id="Graph-244"><a href="#Graph-244"><span class="linenos">244</span></a>                <span class="k">continue</span>
</span><span id="Graph-245"><a href="#Graph-245"><span class="linenos">245</span></a>
</span><span id="Graph-246"><a href="#Graph-246"><span class="linenos">246</span></a>            <span class="n">address</span> <span class="o">=</span> <span class="n">address_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="Graph-247"><a href="#Graph-247"><span class="linenos">247</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_registered_addresses</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">address</span>
</span><span id="Graph-248"><a href="#Graph-248"><span class="linenos">248</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> registered with address </span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-249"><a href="#Graph-249"><span class="linenos">249</span></a>
</span><span id="Graph-250"><a href="#Graph-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;All nodes registered. Registry is now ready.&quot;</span><span class="p">)</span>
</span><span id="Graph-251"><a href="#Graph-251"><span class="linenos">251</span></a>
</span><span id="Graph-252"><a href="#Graph-252"><span class="linenos">252</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_notify_nodes_their_neighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-253"><a href="#Graph-253"><span class="linenos">253</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-254"><a href="#Graph-254"><span class="linenos">254</span></a>            <span class="n">neighbor_info_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_neighbor_info_list</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="Graph-255"><a href="#Graph-255"><span class="linenos">255</span></a>            <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">dumps</span><span class="p">(</span><span class="n">n_info</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="k">for</span> <span class="n">n_info</span> <span class="ow">in</span> <span class="n">neighbor_info_list</span><span class="p">]</span>
</span><span id="Graph-256"><a href="#Graph-256"><span class="linenos">256</span></a>
</span><span id="Graph-257"><a href="#Graph-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">messages</span><span class="p">])</span>
</span><span id="Graph-258"><a href="#Graph-258"><span class="linenos">258</span></a>
</span><span id="Graph-259"><a href="#Graph-259"><span class="linenos">259</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Sent neighbor information to all nodes.&quot;</span><span class="p">)</span>
</span><span id="Graph-260"><a href="#Graph-260"><span class="linenos">260</span></a>
</span><span id="Graph-261"><a href="#Graph-261"><span class="linenos">261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_unregister_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-262"><a href="#Graph-262"><span class="linenos">262</span></a>        <span class="n">nodes_unregistered</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-263"><a href="#Graph-263"><span class="linenos">263</span></a>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes_unregistered</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">:</span>
</span><span id="Graph-264"><a href="#Graph-264"><span class="linenos">264</span></a>            <span class="n">name_bytes</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">recv_multipart</span><span class="p">()</span>
</span><span id="Graph-265"><a href="#Graph-265"><span class="linenos">265</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">name_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="Graph-266"><a href="#Graph-266"><span class="linenos">266</span></a>
</span><span id="Graph-267"><a href="#Graph-267"><span class="linenos">267</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-268"><a href="#Graph-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown node </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. Cannot unregister.&quot;</span><span class="p">)</span>
</span><span id="Graph-269"><a href="#Graph-269"><span class="linenos">269</span></a>                <span class="k">continue</span>
</span><span id="Graph-270"><a href="#Graph-270"><span class="linenos">270</span></a>
</span><span id="Graph-271"><a href="#Graph-271"><span class="linenos">271</span></a>            <span class="k">if</span> <span class="n">message</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;unregister&quot;</span><span class="p">:</span>
</span><span id="Graph-272"><a href="#Graph-272"><span class="linenos">272</span></a>                <span class="n">nodes_unregistered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Graph-273"><a href="#Graph-273"><span class="linenos">273</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;OK&quot;</span><span class="p">])</span>
</span><span id="Graph-274"><a href="#Graph-274"><span class="linenos">274</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> has unregistered.&quot;</span><span class="p">)</span>
</span><span id="Graph-275"><a href="#Graph-275"><span class="linenos">275</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Graph-276"><a href="#Graph-276"><span class="linenos">276</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received message from </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a network topology using a NetworkX graph and provides methods for managing nodes, edges, and network deployment.</p>

<h2 id="parameters">Parameters</h2>

<p>nodes : NodeInput | None, optional
    An iterable of node names to initialize the graph. If None, the graph starts empty.
edges : EdgeInput | None, optional
    An iterable of edges (tuples of node names) to initialize the graph. If None, the graph starts with no edges.
<em>args : Any
    Additional positional arguments (not used).
*</em>kwargs : Any
    Additional keyword arguments. If 'nx_graph' is provided, it will be used directly as the internal graph representation.</p>

<h2 id="attributes">Attributes</h2>

<p>nodes : NodeView
    A view of the nodes in the graph.
edges : EdgeView
    A view of the edges in the graph.
number_of_nodes : int
    The number of nodes in the graph.
number_of_edges : int
    The number of edges in the graph.
is_connected : bool
    Indicates whether the graph is connected.</p>

<h2 id="methods">Methods</h2>

<p>from_mixing_matrix(mixing_matrix, nodes=None) -> "Graph"
    Alternative constructor to create a Graph from a symmetric, double-stochastic mixing matrix.
add_nodes(nodes) -> None
    Adds nodes to the graph.
add_edges(edges) -> None
    Adds edges to the graph.
draw(ax, **kwargs) -> None
    Draws the graph on a given matplotlib Axes.
adjacency(node) -> AdjView
    Returns the adjacency view for a specified node.
deploy() -> None
    Deploys the network topology by registering nodes, notifying them of their neighbors, and unregistering nodes.</p>

<h2 id="notes">Notes</h2>

<ul>
<li>Uses ZeroMQ for communication between nodes and a central registry.</li>
<li>The graph must be connected before deployment.</li>
<li>The <code>nx_graph</code> keyword argument is intended for internal use only and should not be set from outside this package.</li>
<li>The <code><a href="#Graph.from_mixing_matrix">from_mixing_matrix</a></code> method provides a convenient way to create a graph from a mixing matrix, ensuring the matrix is symmetric and double-stochastic.</li>
</ul>
</div>


                            <div id="Graph.__init__" class="classattr">
                                        <input id="Graph.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Graph</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">nodes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">edges</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span>)</span>

                <label class="view-source-button" for="Graph.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.__init__-67"><a href="#Graph.__init__-67"><span class="linenos">67</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Graph.__init__-68"><a href="#Graph.__init__-68"><span class="linenos">68</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Graph.__init__-69"><a href="#Graph.__init__-69"><span class="linenos">69</span></a>        <span class="n">nodes</span><span class="p">:</span> <span class="n">NodeInput</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph.__init__-70"><a href="#Graph.__init__-70"><span class="linenos">70</span></a>        <span class="n">edges</span><span class="p">:</span> <span class="n">EdgeInput</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph.__init__-71"><a href="#Graph.__init__-71"><span class="linenos">71</span></a>        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Graph.__init__-72"><a href="#Graph.__init__-72"><span class="linenos">72</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Graph.__init__-73"><a href="#Graph.__init__-73"><span class="linenos">73</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.__init__-74"><a href="#Graph.__init__-74"><span class="linenos">74</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="Graph.__init__-75"><a href="#Graph.__init__-75"><span class="linenos">75</span></a>
</span><span id="Graph.__init__-76"><a href="#Graph.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;topolink.Graph&quot;</span><span class="p">)</span>
</span><span id="Graph.__init__-77"><a href="#Graph.__init__-77"><span class="linenos">77</span></a>
</span><span id="Graph.__init__-78"><a href="#Graph.__init__-78"><span class="linenos">78</span></a>        <span class="c1"># If a NetworkX graph is provided, use it directly.</span>
</span><span id="Graph.__init__-79"><a href="#Graph.__init__-79"><span class="linenos">79</span></a>        <span class="c1"># Note: The `nx_graph` attribute is intended for internal use only and should not be set from outside this package.</span>
</span><span id="Graph.__init__-80"><a href="#Graph.__init__-80"><span class="linenos">80</span></a>        <span class="c1"># It is primarily used by alternative constructors (such as from_mixing_matrix) to initialize the graph structure efficiently.</span>
</span><span id="Graph.__init__-81"><a href="#Graph.__init__-81"><span class="linenos">81</span></a>        <span class="k">if</span> <span class="s2">&quot;nx_graph&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
</span><span id="Graph.__init__-82"><a href="#Graph.__init__-82"><span class="linenos">82</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;nx_graph&quot;</span><span class="p">]</span>
</span><span id="Graph.__init__-83"><a href="#Graph.__init__-83"><span class="linenos">83</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Graph.__init__-84"><a href="#Graph.__init__-84"><span class="linenos">84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="Graph.__init__-85"><a href="#Graph.__init__-85"><span class="linenos">85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">nodes</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="Graph.__init__-86"><a href="#Graph.__init__-86"><span class="linenos">86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span> <span class="ow">or</span> <span class="p">[])</span>
</span><span id="Graph.__init__-87"><a href="#Graph.__init__-87"><span class="linenos">87</span></a>
</span><span id="Graph.__init__-88"><a href="#Graph.__init__-88"><span class="linenos">88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">()</span>
</span><span id="Graph.__init__-89"><a href="#Graph.__init__-89"><span class="linenos">89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span> <span class="o">=</span> <span class="n">RegistryAdvertiser</span><span class="p">()</span>
</span><span id="Graph.__init__-90"><a href="#Graph.__init__-90"><span class="linenos">90</span></a>
</span><span id="Graph.__init__-91"><a href="#Graph.__init__-91"><span class="linenos">91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_host</span> <span class="o">=</span> <span class="n">get_local_ip</span><span class="p">()</span>
</span><span id="Graph.__init__-92"><a href="#Graph.__init__-92"><span class="linenos">92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setup_router</span><span class="p">()</span>
</span><span id="Graph.__init__-93"><a href="#Graph.__init__-93"><span class="linenos">93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)</span>
</span><span id="Graph.__init__-94"><a href="#Graph.__init__-94"><span class="linenos">94</span></a>
</span><span id="Graph.__init__-95"><a href="#Graph.__init__-95"><span class="linenos">95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_addresses</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.from_mixing_matrix" class="classattr">
                                        <input id="Graph.from_mixing_matrix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_mixing_matrix</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">mixing_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span>,</span><span class="param">	<span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#Graph">Graph</a></span>:</span></span>

                <label class="view-source-button" for="Graph.from_mixing_matrix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.from_mixing_matrix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.from_mixing_matrix-97"><a href="#Graph.from_mixing_matrix-97"><span class="linenos"> 97</span></a>    <span class="nd">@classmethod</span>
</span><span id="Graph.from_mixing_matrix-98"><a href="#Graph.from_mixing_matrix-98"><span class="linenos"> 98</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_mixing_matrix</span><span class="p">(</span>
</span><span id="Graph.from_mixing_matrix-99"><a href="#Graph.from_mixing_matrix-99"><span class="linenos"> 99</span></a>        <span class="bp">cls</span><span class="p">,</span> <span class="n">mixing_matrix</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Graph.from_mixing_matrix-100"><a href="#Graph.from_mixing_matrix-100"><span class="linenos">100</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Graph&quot;</span><span class="p">:</span>
</span><span id="Graph.from_mixing_matrix-101"><a href="#Graph.from_mixing_matrix-101"><span class="linenos">101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.from_mixing_matrix-102"><a href="#Graph.from_mixing_matrix-102"><span class="linenos">102</span></a><span class="sd">        Create a Graph instance from a mixing matrix.</span>
</span><span id="Graph.from_mixing_matrix-103"><a href="#Graph.from_mixing_matrix-103"><span class="linenos">103</span></a><span class="sd">        The mixing matrix must be symmetric and double-stochastic.</span>
</span><span id="Graph.from_mixing_matrix-104"><a href="#Graph.from_mixing_matrix-104"><span class="linenos">104</span></a>
</span><span id="Graph.from_mixing_matrix-105"><a href="#Graph.from_mixing_matrix-105"><span class="linenos">105</span></a><span class="sd">        Parameters</span>
</span><span id="Graph.from_mixing_matrix-106"><a href="#Graph.from_mixing_matrix-106"><span class="linenos">106</span></a><span class="sd">        ----------</span>
</span><span id="Graph.from_mixing_matrix-107"><a href="#Graph.from_mixing_matrix-107"><span class="linenos">107</span></a><span class="sd">        mixing_matrix : NDArray[float64]</span>
</span><span id="Graph.from_mixing_matrix-108"><a href="#Graph.from_mixing_matrix-108"><span class="linenos">108</span></a><span class="sd">            A square matrix representing the mixing coefficients between nodes.</span>
</span><span id="Graph.from_mixing_matrix-109"><a href="#Graph.from_mixing_matrix-109"><span class="linenos">109</span></a><span class="sd">        nodes : list[str], optional</span>
</span><span id="Graph.from_mixing_matrix-110"><a href="#Graph.from_mixing_matrix-110"><span class="linenos">110</span></a><span class="sd">            A list of self defined node names. If not provided, nodes will be named sequentially as &quot;1&quot;, &quot;2&quot;, ..., &quot;n&quot;.</span>
</span><span id="Graph.from_mixing_matrix-111"><a href="#Graph.from_mixing_matrix-111"><span class="linenos">111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.from_mixing_matrix-112"><a href="#Graph.from_mixing_matrix-112"><span class="linenos">112</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">mixing_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">):</span>
</span><span id="Graph.from_mixing_matrix-113"><a href="#Graph.from_mixing_matrix-113"><span class="linenos">113</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The mixing matrix must be symmetric.&quot;</span><span class="p">)</span>
</span><span id="Graph.from_mixing_matrix-114"><a href="#Graph.from_mixing_matrix-114"><span class="linenos">114</span></a>
</span><span id="Graph.from_mixing_matrix-115"><a href="#Graph.from_mixing_matrix-115"><span class="linenos">115</span></a>        <span class="n">ones_vec</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Graph.from_mixing_matrix-116"><a href="#Graph.from_mixing_matrix-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">np_sum</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">ones_vec</span><span class="p">):</span>
</span><span id="Graph.from_mixing_matrix-117"><a href="#Graph.from_mixing_matrix-117"><span class="linenos">117</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The mixing matrix must be double-stochastic.&quot;</span><span class="p">)</span>
</span><span id="Graph.from_mixing_matrix-118"><a href="#Graph.from_mixing_matrix-118"><span class="linenos">118</span></a>
</span><span id="Graph.from_mixing_matrix-119"><a href="#Graph.from_mixing_matrix-119"><span class="linenos">119</span></a>        <span class="n">nodelist</span> <span class="o">=</span> <span class="n">nodes</span> <span class="ow">or</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mixing_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
</span><span id="Graph.from_mixing_matrix-120"><a href="#Graph.from_mixing_matrix-120"><span class="linenos">120</span></a>
</span><span id="Graph.from_mixing_matrix-121"><a href="#Graph.from_mixing_matrix-121"><span class="linenos">121</span></a>        <span class="n">nx_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_numpy_array</span><span class="p">(</span>
</span><span id="Graph.from_mixing_matrix-122"><a href="#Graph.from_mixing_matrix-122"><span class="linenos">122</span></a>            <span class="n">mixing_matrix</span><span class="p">,</span> <span class="n">create_using</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">,</span> <span class="n">nodelist</span><span class="o">=</span><span class="n">nodelist</span>  <span class="c1"># type: ignore[arg-type]</span>
</span><span id="Graph.from_mixing_matrix-123"><a href="#Graph.from_mixing_matrix-123"><span class="linenos">123</span></a>        <span class="p">)</span>
</span><span id="Graph.from_mixing_matrix-124"><a href="#Graph.from_mixing_matrix-124"><span class="linenos">124</span></a>        <span class="n">nx_graph</span><span class="o">.</span><span class="n">remove_edges_from</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">selfloop_edges</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">))</span>
</span><span id="Graph.from_mixing_matrix-125"><a href="#Graph.from_mixing_matrix-125"><span class="linenos">125</span></a>
</span><span id="Graph.from_mixing_matrix-126"><a href="#Graph.from_mixing_matrix-126"><span class="linenos">126</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">nx_graph</span><span class="o">=</span><span class="n">nx_graph</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create a Graph instance from a mixing matrix.
The mixing matrix must be symmetric and double-stochastic.</p>

<h2 id="parameters">Parameters</h2>

<p>mixing_matrix : NDArray[float64]
    A square matrix representing the mixing coefficients between nodes.
nodes : list[str], optional
    A list of self defined node names. If not provided, nodes will be named sequentially as "1", "2", ..., "n".</p>
</div>


                            </div>
                            <div id="Graph.nodes" class="classattr">
                                        <input id="Graph.nodes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">nodes</span><span class="annotation">: Collection[str]</span>

                <label class="view-source-button" for="Graph.nodes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.nodes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.nodes-128"><a href="#Graph.nodes-128"><span class="linenos">128</span></a>    <span class="nd">@property</span>
</span><span id="Graph.nodes-129"><a href="#Graph.nodes-129"><span class="linenos">129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeView</span><span class="p">:</span>
</span><span id="Graph.nodes-130"><a href="#Graph.nodes-130"><span class="linenos">130</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">nodes</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.edges" class="classattr">
                                        <input id="Graph.edges-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">edges</span><span class="annotation">: Collection[tuple[str, str]]</span>

                <label class="view-source-button" for="Graph.edges-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.edges"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.edges-132"><a href="#Graph.edges-132"><span class="linenos">132</span></a>    <span class="nd">@property</span>
</span><span id="Graph.edges-133"><a href="#Graph.edges-133"><span class="linenos">133</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EdgeView</span><span class="p">:</span>
</span><span id="Graph.edges-134"><a href="#Graph.edges-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">edges</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.number_of_nodes" class="classattr">
                                        <input id="Graph.number_of_nodes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">number_of_nodes</span><span class="annotation">: int</span>

                <label class="view-source-button" for="Graph.number_of_nodes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.number_of_nodes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.number_of_nodes-136"><a href="#Graph.number_of_nodes-136"><span class="linenos">136</span></a>    <span class="nd">@property</span>
</span><span id="Graph.number_of_nodes-137"><a href="#Graph.number_of_nodes-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">number_of_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Graph.number_of_nodes-138"><a href="#Graph.number_of_nodes-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.number_of_edges" class="classattr">
                                        <input id="Graph.number_of_edges-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">number_of_edges</span><span class="annotation">: int</span>

                <label class="view-source-button" for="Graph.number_of_edges-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.number_of_edges"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.number_of_edges-140"><a href="#Graph.number_of_edges-140"><span class="linenos">140</span></a>    <span class="nd">@property</span>
</span><span id="Graph.number_of_edges-141"><a href="#Graph.number_of_edges-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">number_of_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Graph.number_of_edges-142"><a href="#Graph.number_of_edges-142"><span class="linenos">142</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.is_connected" class="classattr">
                                        <input id="Graph.is_connected-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_connected</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Graph.is_connected-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.is_connected"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.is_connected-144"><a href="#Graph.is_connected-144"><span class="linenos">144</span></a>    <span class="nd">@property</span>
</span><span id="Graph.is_connected-145"><a href="#Graph.is_connected-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Graph.is_connected-146"><a href="#Graph.is_connected-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="n">nx</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.add_nodes" class="classattr">
                                        <input id="Graph.add_nodes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_nodes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Graph.add_nodes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_nodes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_nodes-148"><a href="#Graph.add_nodes-148"><span class="linenos">148</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">NodeInput</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.add_nodes-149"><a href="#Graph.add_nodes-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.add_edges" class="classattr">
                                        <input id="Graph.add_edges-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_edges</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Graph.add_edges-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_edges"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_edges-151"><a href="#Graph.add_edges-151"><span class="linenos">151</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edges</span><span class="p">:</span> <span class="n">EdgeInput</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.add_edges-152"><a href="#Graph.add_edges-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Graph.draw" class="classattr">
                                        <input id="Graph.draw-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ax</span><span class="p">:</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">Axes</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Graph.draw-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.draw"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.draw-154"><a href="#Graph.draw-154"><span class="linenos">154</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">Axes</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.draw-155"><a href="#Graph.draw-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.draw-156"><a href="#Graph.draw-156"><span class="linenos">156</span></a><span class="sd">        Draws the graph using NetworkX&#39;s drawing functionality on the provided matplotlib Axes.</span>
</span><span id="Graph.draw-157"><a href="#Graph.draw-157"><span class="linenos">157</span></a>
</span><span id="Graph.draw-158"><a href="#Graph.draw-158"><span class="linenos">158</span></a><span class="sd">        Parameters:</span>
</span><span id="Graph.draw-159"><a href="#Graph.draw-159"><span class="linenos">159</span></a><span class="sd">            ax (Axes): A matplotlib Axes object where the graph will be drawn.</span>
</span><span id="Graph.draw-160"><a href="#Graph.draw-160"><span class="linenos">160</span></a><span class="sd">            **kwargs: Additional keyword arguments passed to `networkx.draw` for customizing the drawing.</span>
</span><span id="Graph.draw-161"><a href="#Graph.draw-161"><span class="linenos">161</span></a>
</span><span id="Graph.draw-162"><a href="#Graph.draw-162"><span class="linenos">162</span></a><span class="sd">        Returns:</span>
</span><span id="Graph.draw-163"><a href="#Graph.draw-163"><span class="linenos">163</span></a><span class="sd">            None</span>
</span><span id="Graph.draw-164"><a href="#Graph.draw-164"><span class="linenos">164</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.draw-165"><a href="#Graph.draw-165"><span class="linenos">165</span></a>        <span class="n">nx_graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span>
</span><span id="Graph.draw-166"><a href="#Graph.draw-166"><span class="linenos">166</span></a>
</span><span id="Graph.draw-167"><a href="#Graph.draw-167"><span class="linenos">167</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">)</span>
</span><span id="Graph.draw-168"><a href="#Graph.draw-168"><span class="linenos">168</span></a>
</span><span id="Graph.draw-169"><a href="#Graph.draw-169"><span class="linenos">169</span></a>        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">pos</span><span class="p">,</span> <span class="s2">&quot;ax&quot;</span><span class="p">:</span> <span class="n">ax</span><span class="p">,</span> <span class="s2">&quot;with_labels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</span><span id="Graph.draw-170"><a href="#Graph.draw-170"><span class="linenos">170</span></a>        <span class="n">options</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Graph.draw-171"><a href="#Graph.draw-171"><span class="linenos">171</span></a>
</span><span id="Graph.draw-172"><a href="#Graph.draw-172"><span class="linenos">172</span></a>        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nx_graph</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Draws the graph using NetworkX's drawing functionality on the provided matplotlib Axes.</p>

<p>Parameters:
    ax (Axes): A matplotlib Axes object where the graph will be drawn.
    **kwargs: Additional keyword arguments passed to <code>networkx.draw</code> for customizing the drawing.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                            <div id="Graph.adjacency" class="classattr">
                                        <input id="Graph.adjacency-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adjacency</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">node</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="Graph.adjacency-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.adjacency"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.adjacency-174"><a href="#Graph.adjacency-174"><span class="linenos">174</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AdjView</span><span class="p">:</span>
</span><span id="Graph.adjacency-175"><a href="#Graph.adjacency-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.adjacency-176"><a href="#Graph.adjacency-176"><span class="linenos">176</span></a><span class="sd">        Returns the adjacency view of the specified node in the graph.</span>
</span><span id="Graph.adjacency-177"><a href="#Graph.adjacency-177"><span class="linenos">177</span></a>
</span><span id="Graph.adjacency-178"><a href="#Graph.adjacency-178"><span class="linenos">178</span></a><span class="sd">        Parameters:</span>
</span><span id="Graph.adjacency-179"><a href="#Graph.adjacency-179"><span class="linenos">179</span></a><span class="sd">            node (str): The identifier of the node whose adjacency is to be retrieved.</span>
</span><span id="Graph.adjacency-180"><a href="#Graph.adjacency-180"><span class="linenos">180</span></a>
</span><span id="Graph.adjacency-181"><a href="#Graph.adjacency-181"><span class="linenos">181</span></a><span class="sd">        Returns:</span>
</span><span id="Graph.adjacency-182"><a href="#Graph.adjacency-182"><span class="linenos">182</span></a><span class="sd">            AdjView: A view of the adjacent nodes and edge data for the given node.</span>
</span><span id="Graph.adjacency-183"><a href="#Graph.adjacency-183"><span class="linenos">183</span></a>
</span><span id="Graph.adjacency-184"><a href="#Graph.adjacency-184"><span class="linenos">184</span></a><span class="sd">        Raises:</span>
</span><span id="Graph.adjacency-185"><a href="#Graph.adjacency-185"><span class="linenos">185</span></a><span class="sd">            KeyError: If the specified node does not exist in the graph.</span>
</span><span id="Graph.adjacency-186"><a href="#Graph.adjacency-186"><span class="linenos">186</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.adjacency-187"><a href="#Graph.adjacency-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nx_graph</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Returns the adjacency view of the specified node in the graph.</p>

<p>Parameters:
    node (str): The identifier of the node whose adjacency is to be retrieved.</p>

<p>Returns:
    AdjView: A view of the adjacent nodes and edge data for the given node.</p>

<p>Raises:
    KeyError: If the specified node does not exist in the graph.</p>
</div>


                            </div>
                            <div id="Graph.deploy" class="classattr">
                                        <input id="Graph.deploy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">deploy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Graph.deploy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.deploy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.deploy-207"><a href="#Graph.deploy-207"><span class="linenos">207</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">deploy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.deploy-208"><a href="#Graph.deploy-208"><span class="linenos">208</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.deploy-209"><a href="#Graph.deploy-209"><span class="linenos">209</span></a><span class="sd">        Deploys the network topology by registering nodes, notifying them of their neighbors,</span>
</span><span id="Graph.deploy-210"><a href="#Graph.deploy-210"><span class="linenos">210</span></a><span class="sd">        and then unregistering the nodes. Ensures that the topology is connected before deployment.</span>
</span><span id="Graph.deploy-211"><a href="#Graph.deploy-211"><span class="linenos">211</span></a><span class="sd">        Cleans up resources by closing the router and terminating the context after deployment.</span>
</span><span id="Graph.deploy-212"><a href="#Graph.deploy-212"><span class="linenos">212</span></a>
</span><span id="Graph.deploy-213"><a href="#Graph.deploy-213"><span class="linenos">213</span></a><span class="sd">        Raises:</span>
</span><span id="Graph.deploy-214"><a href="#Graph.deploy-214"><span class="linenos">214</span></a><span class="sd">            ValueError: If the topology is not connected.</span>
</span><span id="Graph.deploy-215"><a href="#Graph.deploy-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.deploy-216"><a href="#Graph.deploy-216"><span class="linenos">216</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Graph.deploy-217"><a href="#Graph.deploy-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_connected</span><span class="p">:</span>
</span><span id="Graph.deploy-218"><a href="#Graph.deploy-218"><span class="linenos">218</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The provided topology must be connected.&quot;</span><span class="p">)</span>
</span><span id="Graph.deploy-219"><a href="#Graph.deploy-219"><span class="linenos">219</span></a>
</span><span id="Graph.deploy-220"><a href="#Graph.deploy-220"><span class="linenos">220</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_nodes</span><span class="p">()</span>
</span><span id="Graph.deploy-221"><a href="#Graph.deploy-221"><span class="linenos">221</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_nodes_their_neighbors</span><span class="p">()</span>
</span><span id="Graph.deploy-222"><a href="#Graph.deploy-222"><span class="linenos">222</span></a>            <span class="c1"># TODO: More deployment logic can be added here if needed.</span>
</span><span id="Graph.deploy-223"><a href="#Graph.deploy-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_unregister_nodes</span><span class="p">()</span>
</span><span id="Graph.deploy-224"><a href="#Graph.deploy-224"><span class="linenos">224</span></a>        <span class="k">finally</span><span class="p">:</span>
</span><span id="Graph.deploy-225"><a href="#Graph.deploy-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Graph.deploy-226"><a href="#Graph.deploy-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">term</span><span class="p">()</span>
</span><span id="Graph.deploy-227"><a href="#Graph.deploy-227"><span class="linenos">227</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_registry_advertiser</span><span class="o">.</span><span class="n">unregister</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Deploys the network topology by registering nodes, notifying them of their neighbors,
and then unregistering the nodes. Ensures that the topology is connected before deployment.
Cleans up resources by closing the router and terminating the context after deployment.</p>

<p>Raises:
    ValueError: If the topology is not connected.</p>
</div>


                            </div>
                </section>
                <section id="NodeHandle">
                            <input id="NodeHandle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">NodeHandle</span>:

                <label class="view-source-button" for="NodeHandle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle-13"><a href="#NodeHandle-13"><span class="linenos"> 13</span></a><span class="k">class</span><span class="w"> </span><span class="nc">NodeHandle</span><span class="p">:</span>
</span><span id="NodeHandle-14"><a href="#NodeHandle-14"><span class="linenos"> 14</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-15"><a href="#NodeHandle-15"><span class="linenos"> 15</span></a><span class="sd">    NodeHandle manages communication and state exchange between a node and its neighbors in a distributed network.</span>
</span><span id="NodeHandle-16"><a href="#NodeHandle-16"><span class="linenos"> 16</span></a>
</span><span id="NodeHandle-17"><a href="#NodeHandle-17"><span class="linenos"> 17</span></a><span class="sd">    This class handles:</span>
</span><span id="NodeHandle-18"><a href="#NodeHandle-18"><span class="linenos"> 18</span></a><span class="sd">    - Registration with a central registry to obtain neighbor information.</span>
</span><span id="NodeHandle-19"><a href="#NodeHandle-19"><span class="linenos"> 19</span></a><span class="sd">    - Establishing ZeroMQ sockets for communication with neighbors.</span>
</span><span id="NodeHandle-20"><a href="#NodeHandle-20"><span class="linenos"> 20</span></a><span class="sd">    - Sending and receiving state information to/from neighbors.</span>
</span><span id="NodeHandle-21"><a href="#NodeHandle-21"><span class="linenos"> 21</span></a><span class="sd">    - Performing operations like broadcasting, gathering, computing Laplacians, and weighted mixing.</span>
</span><span id="NodeHandle-22"><a href="#NodeHandle-22"><span class="linenos"> 22</span></a>
</span><span id="NodeHandle-23"><a href="#NodeHandle-23"><span class="linenos"> 23</span></a><span class="sd">    Parameters</span>
</span><span id="NodeHandle-24"><a href="#NodeHandle-24"><span class="linenos"> 24</span></a><span class="sd">    ----------</span>
</span><span id="NodeHandle-25"><a href="#NodeHandle-25"><span class="linenos"> 25</span></a><span class="sd">    name : str</span>
</span><span id="NodeHandle-26"><a href="#NodeHandle-26"><span class="linenos"> 26</span></a><span class="sd">        Unique identifier for the node.</span>
</span><span id="NodeHandle-27"><a href="#NodeHandle-27"><span class="linenos"> 27</span></a>
</span><span id="NodeHandle-28"><a href="#NodeHandle-28"><span class="linenos"> 28</span></a><span class="sd">    Attributes</span>
</span><span id="NodeHandle-29"><a href="#NodeHandle-29"><span class="linenos"> 29</span></a><span class="sd">    ----------</span>
</span><span id="NodeHandle-30"><a href="#NodeHandle-30"><span class="linenos"> 30</span></a><span class="sd">    name : str</span>
</span><span id="NodeHandle-31"><a href="#NodeHandle-31"><span class="linenos"> 31</span></a><span class="sd">        Name of the node.</span>
</span><span id="NodeHandle-32"><a href="#NodeHandle-32"><span class="linenos"> 32</span></a><span class="sd">    num_neighbors : int</span>
</span><span id="NodeHandle-33"><a href="#NodeHandle-33"><span class="linenos"> 33</span></a><span class="sd">        Number of neighbor nodes.</span>
</span><span id="NodeHandle-34"><a href="#NodeHandle-34"><span class="linenos"> 34</span></a><span class="sd">    neighbor_names : KeysView[str]</span>
</span><span id="NodeHandle-35"><a href="#NodeHandle-35"><span class="linenos"> 35</span></a><span class="sd">        Names of all neighbor nodes.</span>
</span><span id="NodeHandle-36"><a href="#NodeHandle-36"><span class="linenos"> 36</span></a>
</span><span id="NodeHandle-37"><a href="#NodeHandle-37"><span class="linenos"> 37</span></a><span class="sd">    Methods</span>
</span><span id="NodeHandle-38"><a href="#NodeHandle-38"><span class="linenos"> 38</span></a><span class="sd">    -------</span>
</span><span id="NodeHandle-39"><a href="#NodeHandle-39"><span class="linenos"> 39</span></a><span class="sd">    send_to_all(data_to_send: dict[str, NDArray[float64]]) -&gt; None</span>
</span><span id="NodeHandle-40"><a href="#NodeHandle-40"><span class="linenos"> 40</span></a><span class="sd">        Sends data to all specified neighbor nodes.</span>
</span><span id="NodeHandle-41"><a href="#NodeHandle-41"><span class="linenos"> 41</span></a><span class="sd">    broadcast(state: NDArray[float64]) -&gt; None</span>
</span><span id="NodeHandle-42"><a href="#NodeHandle-42"><span class="linenos"> 42</span></a><span class="sd">        Broadcasts the given state to all neighbor nodes.</span>
</span><span id="NodeHandle-43"><a href="#NodeHandle-43"><span class="linenos"> 43</span></a><span class="sd">    gather() -&gt; list[NDArray[float64]]</span>
</span><span id="NodeHandle-44"><a href="#NodeHandle-44"><span class="linenos"> 44</span></a><span class="sd">        Receives and collects data from all neighbors.</span>
</span><span id="NodeHandle-45"><a href="#NodeHandle-45"><span class="linenos"> 45</span></a><span class="sd">    weighted_gather() -&gt; list[NDArray[float64]]</span>
</span><span id="NodeHandle-46"><a href="#NodeHandle-46"><span class="linenos"> 46</span></a><span class="sd">        Gathers data from all neighbors, applying corresponding weights.</span>
</span><span id="NodeHandle-47"><a href="#NodeHandle-47"><span class="linenos"> 47</span></a><span class="sd">    laplacian(state: NDArray[float64]) -&gt; NDArray[float64]</span>
</span><span id="NodeHandle-48"><a href="#NodeHandle-48"><span class="linenos"> 48</span></a><span class="sd">        Computes the Laplacian of the given state vector based on the states of neighboring nodes.</span>
</span><span id="NodeHandle-49"><a href="#NodeHandle-49"><span class="linenos"> 49</span></a><span class="sd">    weighted_mix(state: NDArray[float64]) -&gt; NDArray[float64]</span>
</span><span id="NodeHandle-50"><a href="#NodeHandle-50"><span class="linenos"> 50</span></a><span class="sd">        Performs the weighted mixing operation for distributed optimization using the weight matrix W.</span>
</span><span id="NodeHandle-51"><a href="#NodeHandle-51"><span class="linenos"> 51</span></a>
</span><span id="NodeHandle-52"><a href="#NodeHandle-52"><span class="linenos"> 52</span></a><span class="sd">    Notes</span>
</span><span id="NodeHandle-53"><a href="#NodeHandle-53"><span class="linenos"> 53</span></a><span class="sd">    -----</span>
</span><span id="NodeHandle-54"><a href="#NodeHandle-54"><span class="linenos"> 54</span></a><span class="sd">    - Uses ZeroMQ sockets for communication.</span>
</span><span id="NodeHandle-55"><a href="#NodeHandle-55"><span class="linenos"> 55</span></a><span class="sd">    - State information is exchanged as NumPy arrays of float64, serialized to bytes.</span>
</span><span id="NodeHandle-56"><a href="#NodeHandle-56"><span class="linenos"> 56</span></a><span class="sd">    - Laplacian and weighted mixing operations are useful for consensus and distributed optimization algorithms.</span>
</span><span id="NodeHandle-57"><a href="#NodeHandle-57"><span class="linenos"> 57</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="NodeHandle-58"><a href="#NodeHandle-58"><span class="linenos"> 58</span></a>
</span><span id="NodeHandle-59"><a href="#NodeHandle-59"><span class="linenos"> 59</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-60"><a href="#NodeHandle-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="NodeHandle-61"><a href="#NodeHandle-61"><span class="linenos"> 61</span></a>
</span><span id="NodeHandle-62"><a href="#NodeHandle-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_ip_addr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_port</span> <span class="o">=</span> <span class="n">get_registry_info</span><span class="p">()</span>
</span><span id="NodeHandle-63"><a href="#NodeHandle-63"><span class="linenos"> 63</span></a>
</span><span id="NodeHandle-64"><a href="#NodeHandle-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;topolink.NodeHandle&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-65"><a href="#NodeHandle-65"><span class="linenos"> 65</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_local_ip</span> <span class="o">=</span> <span class="n">get_local_ip</span><span class="p">()</span>
</span><span id="NodeHandle-66"><a href="#NodeHandle-66"><span class="linenos"> 66</span></a>
</span><span id="NodeHandle-67"><a href="#NodeHandle-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">()</span>
</span><span id="NodeHandle-68"><a href="#NodeHandle-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">REQ</span><span class="p">)</span>
</span><span id="NodeHandle-69"><a href="#NodeHandle-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">IDENTITY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="NodeHandle-70"><a href="#NodeHandle-70"><span class="linenos"> 70</span></a>
</span><span id="NodeHandle-71"><a href="#NodeHandle-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_router</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">ROUTER</span><span class="p">)</span>
</span><span id="NodeHandle-72"><a href="#NodeHandle-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">bind_to_random_port</span><span class="p">(</span><span class="s2">&quot;tcp://*&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-73"><a href="#NodeHandle-73"><span class="linenos"> 73</span></a>
</span><span id="NodeHandle-74"><a href="#NodeHandle-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="NodeHandle-75"><a href="#NodeHandle-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle-76"><a href="#NodeHandle-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle-77"><a href="#NodeHandle-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SyncSocket</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle-78"><a href="#NodeHandle-78"><span class="linenos"> 78</span></a>
</span><span id="NodeHandle-79"><a href="#NodeHandle-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register</span><span class="p">()</span>
</span><span id="NodeHandle-80"><a href="#NodeHandle-80"><span class="linenos"> 80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_connect_to_neighbors</span><span class="p">()</span>
</span><span id="NodeHandle-81"><a href="#NodeHandle-81"><span class="linenos"> 81</span></a>
</span><span id="NodeHandle-82"><a href="#NodeHandle-82"><span class="linenos"> 82</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-83"><a href="#NodeHandle-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_unregister</span><span class="p">()</span>
</span><span id="NodeHandle-84"><a href="#NodeHandle-84"><span class="linenos"> 84</span></a>
</span><span id="NodeHandle-85"><a href="#NodeHandle-85"><span class="linenos"> 85</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle-86"><a href="#NodeHandle-86"><span class="linenos"> 86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NodeHandle-87"><a href="#NodeHandle-87"><span class="linenos"> 87</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="NodeHandle-88"><a href="#NodeHandle-88"><span class="linenos"> 88</span></a>
</span><span id="NodeHandle-89"><a href="#NodeHandle-89"><span class="linenos"> 89</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle-90"><a href="#NodeHandle-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">num_neighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="NodeHandle-91"><a href="#NodeHandle-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">)</span>
</span><span id="NodeHandle-92"><a href="#NodeHandle-92"><span class="linenos"> 92</span></a>
</span><span id="NodeHandle-93"><a href="#NodeHandle-93"><span class="linenos"> 93</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle-94"><a href="#NodeHandle-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">neighbor_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KeysView</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="NodeHandle-95"><a href="#NodeHandle-95"><span class="linenos"> 95</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="NodeHandle-96"><a href="#NodeHandle-96"><span class="linenos"> 96</span></a>
</span><span id="NodeHandle-97"><a href="#NodeHandle-97"><span class="linenos"> 97</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-98"><a href="#NodeHandle-98"><span class="linenos"> 98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry_ip_addr</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry_port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-99"><a href="#NodeHandle-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_local_ip</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span> <span class="o">+</span> <span class="sa">b</span><span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="NodeHandle-100"><a href="#NodeHandle-100"><span class="linenos">100</span></a>        <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">recv_multipart</span><span class="p">()</span>
</span><span id="NodeHandle-101"><a href="#NodeHandle-101"><span class="linenos">101</span></a>
</span><span id="NodeHandle-102"><a href="#NodeHandle-102"><span class="linenos">102</span></a>        <span class="k">if</span> <span class="n">reply</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;Error: Unknown node&quot;</span><span class="p">:</span>
</span><span id="NodeHandle-103"><a href="#NodeHandle-103"><span class="linenos">103</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown node. Please check the node name.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-104"><a href="#NodeHandle-104"><span class="linenos">104</span></a>
</span><span id="NodeHandle-105"><a href="#NodeHandle-105"><span class="linenos">105</span></a>        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">reply</span><span class="p">:</span>
</span><span id="NodeHandle-106"><a href="#NodeHandle-106"><span class="linenos">106</span></a>            <span class="n">neighbor_info</span><span class="p">:</span> <span class="n">NeighborInfo</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
</span><span id="NodeHandle-107"><a href="#NodeHandle-107"><span class="linenos">107</span></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">neighbor_info</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="NodeHandle-108"><a href="#NodeHandle-108"><span class="linenos">108</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_info</span><span class="p">[</span><span class="s2">&quot;address&quot;</span><span class="p">]</span>
</span><span id="NodeHandle-109"><a href="#NodeHandle-109"><span class="linenos">109</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">neighbor_info</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span>
</span><span id="NodeHandle-110"><a href="#NodeHandle-110"><span class="linenos">110</span></a>
</span><span id="NodeHandle-111"><a href="#NodeHandle-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="NodeHandle-112"><a href="#NodeHandle-112"><span class="linenos">112</span></a>
</span><span id="NodeHandle-113"><a href="#NodeHandle-113"><span class="linenos">113</span></a>        <span class="n">registry_address</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry_ip_addr</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry_port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="NodeHandle-114"><a href="#NodeHandle-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registered node </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">registry_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-115"><a href="#NodeHandle-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Neighbor addresses: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-116"><a href="#NodeHandle-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node address: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_local_ip</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-117"><a href="#NodeHandle-117"><span class="linenos">117</span></a>
</span><span id="NodeHandle-118"><a href="#NodeHandle-118"><span class="linenos">118</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_unregister</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-119"><a href="#NodeHandle-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;unregister&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-120"><a href="#NodeHandle-120"><span class="linenos">120</span></a>        <span class="n">reply</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span><span id="NodeHandle-121"><a href="#NodeHandle-121"><span class="linenos">121</span></a>        <span class="k">if</span> <span class="n">reply</span> <span class="o">!=</span> <span class="sa">b</span><span class="s2">&quot;OK&quot;</span><span class="p">:</span>
</span><span id="NodeHandle-122"><a href="#NodeHandle-122"><span class="linenos">122</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to unregister node.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-123"><a href="#NodeHandle-123"><span class="linenos">123</span></a>
</span><span id="NodeHandle-124"><a href="#NodeHandle-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2"> unregistered from server.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-125"><a href="#NodeHandle-125"><span class="linenos">125</span></a>
</span><span id="NodeHandle-126"><a href="#NodeHandle-126"><span class="linenos">126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_connect_to_neighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-127"><a href="#NodeHandle-127"><span class="linenos">127</span></a>        <span class="k">for</span> <span class="n">neighbor_name</span><span class="p">,</span> <span class="n">address</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="NodeHandle-128"><a href="#NodeHandle-128"><span class="linenos">128</span></a>            <span class="n">dealer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">DEALER</span><span class="p">)</span>
</span><span id="NodeHandle-129"><a href="#NodeHandle-129"><span class="linenos">129</span></a>            <span class="n">dealer</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">IDENTITY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="NodeHandle-130"><a href="#NodeHandle-130"><span class="linenos">130</span></a>            <span class="n">dealer</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-131"><a href="#NodeHandle-131"><span class="linenos">131</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="p">[</span><span class="n">neighbor_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">dealer</span>
</span><span id="NodeHandle-132"><a href="#NodeHandle-132"><span class="linenos">132</span></a>
</span><span id="NodeHandle-133"><a href="#NodeHandle-133"><span class="linenos">133</span></a>        <span class="k">for</span> <span class="n">dealer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="NodeHandle-134"><a href="#NodeHandle-134"><span class="linenos">134</span></a>            <span class="n">dealer</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-135"><a href="#NodeHandle-135"><span class="linenos">135</span></a>
</span><span id="NodeHandle-136"><a href="#NodeHandle-136"><span class="linenos">136</span></a>        <span class="n">connected</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="NodeHandle-137"><a href="#NodeHandle-137"><span class="linenos">137</span></a>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">connected</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_neighbors</span><span class="p">:</span>
</span><span id="NodeHandle-138"><a href="#NodeHandle-138"><span class="linenos">138</span></a>            <span class="n">client_id</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">recv_multipart</span><span class="p">()</span>
</span><span id="NodeHandle-139"><a href="#NodeHandle-139"><span class="linenos">139</span></a>            <span class="n">neighbor_name</span> <span class="o">=</span> <span class="n">client_id</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="NodeHandle-140"><a href="#NodeHandle-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">neighbor_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span>
</span><span id="NodeHandle-141"><a href="#NodeHandle-141"><span class="linenos">141</span></a>                <span class="n">connected</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">neighbor_name</span><span class="p">)</span>
</span><span id="NodeHandle-142"><a href="#NodeHandle-142"><span class="linenos">142</span></a>
</span><span id="NodeHandle-143"><a href="#NodeHandle-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connected to all neighbors.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-144"><a href="#NodeHandle-144"><span class="linenos">144</span></a>
</span><span id="NodeHandle-145"><a href="#NodeHandle-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">send_to_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_to_send</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-146"><a href="#NodeHandle-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-147"><a href="#NodeHandle-147"><span class="linenos">147</span></a><span class="sd">        Sends data to all specified neighbor nodes.</span>
</span><span id="NodeHandle-148"><a href="#NodeHandle-148"><span class="linenos">148</span></a>
</span><span id="NodeHandle-149"><a href="#NodeHandle-149"><span class="linenos">149</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle-150"><a href="#NodeHandle-150"><span class="linenos">150</span></a><span class="sd">            data_to_send (dict[str, NDArray[float64]]): A dictionary mapping neighbor names to the data arrays to send.</span>
</span><span id="NodeHandle-151"><a href="#NodeHandle-151"><span class="linenos">151</span></a>
</span><span id="NodeHandle-152"><a href="#NodeHandle-152"><span class="linenos">152</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-153"><a href="#NodeHandle-153"><span class="linenos">153</span></a><span class="sd">            None</span>
</span><span id="NodeHandle-154"><a href="#NodeHandle-154"><span class="linenos">154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-155"><a href="#NodeHandle-155"><span class="linenos">155</span></a>        <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">data_to_send</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="NodeHandle-156"><a href="#NodeHandle-156"><span class="linenos">156</span></a>            <span class="k">if</span> <span class="n">neighbor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span>
</span><span id="NodeHandle-157"><a href="#NodeHandle-157"><span class="linenos">157</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Neighbor </span><span class="si">{</span><span class="n">neighbor</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle-158"><a href="#NodeHandle-158"><span class="linenos">158</span></a>
</span><span id="NodeHandle-159"><a href="#NodeHandle-159"><span class="linenos">159</span></a>            <span class="n">state_bytes</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
</span><span id="NodeHandle-160"><a href="#NodeHandle-160"><span class="linenos">160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">neighbor</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">state_bytes</span><span class="p">])</span>
</span><span id="NodeHandle-161"><a href="#NodeHandle-161"><span class="linenos">161</span></a>
</span><span id="NodeHandle-162"><a href="#NodeHandle-162"><span class="linenos">162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle-163"><a href="#NodeHandle-163"><span class="linenos">163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-164"><a href="#NodeHandle-164"><span class="linenos">164</span></a><span class="sd">        Broadcasts the given state to all neighbor nodes.</span>
</span><span id="NodeHandle-165"><a href="#NodeHandle-165"><span class="linenos">165</span></a>
</span><span id="NodeHandle-166"><a href="#NodeHandle-166"><span class="linenos">166</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle-167"><a href="#NodeHandle-167"><span class="linenos">167</span></a><span class="sd">            state (NDArray[float64]): The state array to broadcast to neighbors.</span>
</span><span id="NodeHandle-168"><a href="#NodeHandle-168"><span class="linenos">168</span></a>
</span><span id="NodeHandle-169"><a href="#NodeHandle-169"><span class="linenos">169</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-170"><a href="#NodeHandle-170"><span class="linenos">170</span></a><span class="sd">            None</span>
</span><span id="NodeHandle-171"><a href="#NodeHandle-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-172"><a href="#NodeHandle-172"><span class="linenos">172</span></a>        <span class="n">state_bytes</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
</span><span id="NodeHandle-173"><a href="#NodeHandle-173"><span class="linenos">173</span></a>        <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span>
</span><span id="NodeHandle-174"><a href="#NodeHandle-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">neighbor</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">state_bytes</span><span class="p">])</span>
</span><span id="NodeHandle-175"><a href="#NodeHandle-175"><span class="linenos">175</span></a>
</span><span id="NodeHandle-176"><a href="#NodeHandle-176"><span class="linenos">176</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">gather</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]]:</span>
</span><span id="NodeHandle-177"><a href="#NodeHandle-177"><span class="linenos">177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-178"><a href="#NodeHandle-178"><span class="linenos">178</span></a><span class="sd">        Receives and collects data from all neighbors.</span>
</span><span id="NodeHandle-179"><a href="#NodeHandle-179"><span class="linenos">179</span></a>
</span><span id="NodeHandle-180"><a href="#NodeHandle-180"><span class="linenos">180</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-181"><a href="#NodeHandle-181"><span class="linenos">181</span></a><span class="sd">            dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their received data arrays.</span>
</span><span id="NodeHandle-182"><a href="#NodeHandle-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-183"><a href="#NodeHandle-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="NodeHandle-184"><a href="#NodeHandle-184"><span class="linenos">184</span></a>            <span class="n">neighbor</span><span class="p">:</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">dealer</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
</span><span id="NodeHandle-185"><a href="#NodeHandle-185"><span class="linenos">185</span></a>            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">dealer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="NodeHandle-186"><a href="#NodeHandle-186"><span class="linenos">186</span></a>        <span class="p">}</span>
</span><span id="NodeHandle-187"><a href="#NodeHandle-187"><span class="linenos">187</span></a>
</span><span id="NodeHandle-188"><a href="#NodeHandle-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_gather</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]]:</span>
</span><span id="NodeHandle-189"><a href="#NodeHandle-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-190"><a href="#NodeHandle-190"><span class="linenos">190</span></a><span class="sd">        Gathers data from all neighbors, applying corresponding weights to each received array.</span>
</span><span id="NodeHandle-191"><a href="#NodeHandle-191"><span class="linenos">191</span></a>
</span><span id="NodeHandle-192"><a href="#NodeHandle-192"><span class="linenos">192</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-193"><a href="#NodeHandle-193"><span class="linenos">193</span></a><span class="sd">            dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their weighted data arrays.</span>
</span><span id="NodeHandle-194"><a href="#NodeHandle-194"><span class="linenos">194</span></a><span class="sd">            and multiplied by its associated weight.</span>
</span><span id="NodeHandle-195"><a href="#NodeHandle-195"><span class="linenos">195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-196"><a href="#NodeHandle-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="NodeHandle-197"><a href="#NodeHandle-197"><span class="linenos">197</span></a>            <span class="n">neighbor</span><span class="p">:</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">dealer</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
</span><span id="NodeHandle-198"><a href="#NodeHandle-198"><span class="linenos">198</span></a>            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span>
</span><span id="NodeHandle-199"><a href="#NodeHandle-199"><span class="linenos">199</span></a>            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">dealer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="NodeHandle-200"><a href="#NodeHandle-200"><span class="linenos">200</span></a>        <span class="p">}</span>
</span><span id="NodeHandle-201"><a href="#NodeHandle-201"><span class="linenos">201</span></a>
</span><span id="NodeHandle-202"><a href="#NodeHandle-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">laplacian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]:</span>
</span><span id="NodeHandle-203"><a href="#NodeHandle-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-204"><a href="#NodeHandle-204"><span class="linenos">204</span></a><span class="sd">        Computes the Laplacian of the given state vector based on the states of neighboring nodes.</span>
</span><span id="NodeHandle-205"><a href="#NodeHandle-205"><span class="linenos">205</span></a>
</span><span id="NodeHandle-206"><a href="#NodeHandle-206"><span class="linenos">206</span></a><span class="sd">        The Laplacian is calculated as:</span>
</span><span id="NodeHandle-207"><a href="#NodeHandle-207"><span class="linenos">207</span></a>
</span><span id="NodeHandle-208"><a href="#NodeHandle-208"><span class="linenos">208</span></a><span class="sd">            laplacian = state * number_of_neighbors - sum_of_neighbor_states</span>
</span><span id="NodeHandle-209"><a href="#NodeHandle-209"><span class="linenos">209</span></a>
</span><span id="NodeHandle-210"><a href="#NodeHandle-210"><span class="linenos">210</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle-211"><a href="#NodeHandle-211"><span class="linenos">211</span></a><span class="sd">            state (NDArray[float64]): The state vector of the current node.</span>
</span><span id="NodeHandle-212"><a href="#NodeHandle-212"><span class="linenos">212</span></a>
</span><span id="NodeHandle-213"><a href="#NodeHandle-213"><span class="linenos">213</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-214"><a href="#NodeHandle-214"><span class="linenos">214</span></a><span class="sd">            NDArray[float64]: The Laplacian vector representing the difference between the current state and the average state of its neighbors.</span>
</span><span id="NodeHandle-215"><a href="#NodeHandle-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-216"><a href="#NodeHandle-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="NodeHandle-217"><a href="#NodeHandle-217"><span class="linenos">217</span></a>        <span class="n">neighbor_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gather</span><span class="p">()</span>
</span><span id="NodeHandle-218"><a href="#NodeHandle-218"><span class="linenos">218</span></a>
</span><span id="NodeHandle-219"><a href="#NodeHandle-219"><span class="linenos">219</span></a>        <span class="n">laplacian</span> <span class="o">=</span> <span class="n">state</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighbor_states</span><span class="p">)</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">neighbor_states</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="NodeHandle-220"><a href="#NodeHandle-220"><span class="linenos">220</span></a>
</span><span id="NodeHandle-221"><a href="#NodeHandle-221"><span class="linenos">221</span></a>        <span class="k">return</span> <span class="n">laplacian</span>
</span><span id="NodeHandle-222"><a href="#NodeHandle-222"><span class="linenos">222</span></a>
</span><span id="NodeHandle-223"><a href="#NodeHandle-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_mix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]:</span>
</span><span id="NodeHandle-224"><a href="#NodeHandle-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle-225"><a href="#NodeHandle-225"><span class="linenos">225</span></a><span class="sd">        Performs the weighted mixing operation for distributed optimization using the weight matrix W.</span>
</span><span id="NodeHandle-226"><a href="#NodeHandle-226"><span class="linenos">226</span></a>
</span><span id="NodeHandle-227"><a href="#NodeHandle-227"><span class="linenos">227</span></a><span class="sd">        For a given node i, the mixed state is computed as the i-th row of Wx, where x is the stacked state vector of all nodes.</span>
</span><span id="NodeHandle-228"><a href="#NodeHandle-228"><span class="linenos">228</span></a><span class="sd">        If x_i is multi-dimensional, the operation is applied element-wise.</span>
</span><span id="NodeHandle-229"><a href="#NodeHandle-229"><span class="linenos">229</span></a><span class="sd">        Specifically:</span>
</span><span id="NodeHandle-230"><a href="#NodeHandle-230"><span class="linenos">230</span></a>
</span><span id="NodeHandle-231"><a href="#NodeHandle-231"><span class="linenos">231</span></a><span class="sd">            mixed_state = W_ii * state + sum_j(W_ij * neighbor_state_j)</span>
</span><span id="NodeHandle-232"><a href="#NodeHandle-232"><span class="linenos">232</span></a>
</span><span id="NodeHandle-233"><a href="#NodeHandle-233"><span class="linenos">233</span></a><span class="sd">        where W_ii is self._weight and W_ij are the weights in self._neighbor_weights.</span>
</span><span id="NodeHandle-234"><a href="#NodeHandle-234"><span class="linenos">234</span></a>
</span><span id="NodeHandle-235"><a href="#NodeHandle-235"><span class="linenos">235</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle-236"><a href="#NodeHandle-236"><span class="linenos">236</span></a><span class="sd">            state (NDArray[float64]): The current state vector of node i.</span>
</span><span id="NodeHandle-237"><a href="#NodeHandle-237"><span class="linenos">237</span></a>
</span><span id="NodeHandle-238"><a href="#NodeHandle-238"><span class="linenos">238</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle-239"><a href="#NodeHandle-239"><span class="linenos">239</span></a><span class="sd">            NDArray[float64]: The mixed state vector corresponding to the i-th row of Wx.</span>
</span><span id="NodeHandle-240"><a href="#NodeHandle-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle-241"><a href="#NodeHandle-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="NodeHandle-242"><a href="#NodeHandle-242"><span class="linenos">242</span></a>        <span class="n">weighted_neighbor_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_gather</span><span class="p">()</span>
</span><span id="NodeHandle-243"><a href="#NodeHandle-243"><span class="linenos">243</span></a>
</span><span id="NodeHandle-244"><a href="#NodeHandle-244"><span class="linenos">244</span></a>        <span class="n">mixed_state</span> <span class="o">=</span> <span class="n">state</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weighted_neighbor_states</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="NodeHandle-245"><a href="#NodeHandle-245"><span class="linenos">245</span></a>
</span><span id="NodeHandle-246"><a href="#NodeHandle-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="n">mixed_state</span>
</span></pre></div>


            <div class="docstring"><p>NodeHandle manages communication and state exchange between a node and its neighbors in a distributed network.</p>

<p>This class handles:</p>

<ul>
<li>Registration with a central registry to obtain neighbor information.</li>
<li>Establishing ZeroMQ sockets for communication with neighbors.</li>
<li>Sending and receiving state information to/from neighbors.</li>
<li>Performing operations like broadcasting, gathering, computing Laplacians, and weighted mixing.</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>name : str
    Unique identifier for the node.</p>

<h2 id="attributes">Attributes</h2>

<p>name : str
    Name of the node.
num_neighbors : int
    Number of neighbor nodes.
neighbor_names : KeysView[str]
    Names of all neighbor nodes.</p>

<h2 id="methods">Methods</h2>

<p>send_to_all(data_to_send: dict[str, NDArray[float64]]) -> None
    Sends data to all specified neighbor nodes.
broadcast(state: NDArray[float64]) -> None
    Broadcasts the given state to all neighbor nodes.
gather() -> list[NDArray[float64]]
    Receives and collects data from all neighbors.
weighted_gather() -> list[NDArray[float64]]
    Gathers data from all neighbors, applying corresponding weights.
laplacian(state: NDArray[float64]) -> NDArray[float64]
    Computes the Laplacian of the given state vector based on the states of neighboring nodes.
weighted_mix(state: NDArray[float64]) -> NDArray[float64]
    Performs the weighted mixing operation for distributed optimization using the weight matrix W.</p>

<h2 id="notes">Notes</h2>

<ul>
<li>Uses ZeroMQ sockets for communication.</li>
<li>State information is exchanged as NumPy arrays of float64, serialized to bytes.</li>
<li>Laplacian and weighted mixing operations are useful for consensus and distributed optimization algorithms.</li>
</ul>
</div>


                            <div id="NodeHandle.__init__" class="classattr">
                                        <input id="NodeHandle.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">NodeHandle</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

                <label class="view-source-button" for="NodeHandle.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.__init__-59"><a href="#NodeHandle.__init__-59"><span class="linenos">59</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle.__init__-60"><a href="#NodeHandle.__init__-60"><span class="linenos">60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="NodeHandle.__init__-61"><a href="#NodeHandle.__init__-61"><span class="linenos">61</span></a>
</span><span id="NodeHandle.__init__-62"><a href="#NodeHandle.__init__-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_registry_ip_addr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry_port</span> <span class="o">=</span> <span class="n">get_registry_info</span><span class="p">()</span>
</span><span id="NodeHandle.__init__-63"><a href="#NodeHandle.__init__-63"><span class="linenos">63</span></a>
</span><span id="NodeHandle.__init__-64"><a href="#NodeHandle.__init__-64"><span class="linenos">64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;topolink.NodeHandle&quot;</span><span class="p">)</span>
</span><span id="NodeHandle.__init__-65"><a href="#NodeHandle.__init__-65"><span class="linenos">65</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_local_ip</span> <span class="o">=</span> <span class="n">get_local_ip</span><span class="p">()</span>
</span><span id="NodeHandle.__init__-66"><a href="#NodeHandle.__init__-66"><span class="linenos">66</span></a>
</span><span id="NodeHandle.__init__-67"><a href="#NodeHandle.__init__-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">()</span>
</span><span id="NodeHandle.__init__-68"><a href="#NodeHandle.__init__-68"><span class="linenos">68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">REQ</span><span class="p">)</span>
</span><span id="NodeHandle.__init__-69"><a href="#NodeHandle.__init__-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_req</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">IDENTITY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="NodeHandle.__init__-70"><a href="#NodeHandle.__init__-70"><span class="linenos">70</span></a>
</span><span id="NodeHandle.__init__-71"><a href="#NodeHandle.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_router</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">ROUTER</span><span class="p">)</span>
</span><span id="NodeHandle.__init__-72"><a href="#NodeHandle.__init__-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">bind_to_random_port</span><span class="p">(</span><span class="s2">&quot;tcp://*&quot;</span><span class="p">)</span>
</span><span id="NodeHandle.__init__-73"><a href="#NodeHandle.__init__-73"><span class="linenos">73</span></a>
</span><span id="NodeHandle.__init__-74"><a href="#NodeHandle.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="NodeHandle.__init__-75"><a href="#NodeHandle.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle.__init__-76"><a href="#NodeHandle.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle.__init__-77"><a href="#NodeHandle.__init__-77"><span class="linenos">77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SyncSocket</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="NodeHandle.__init__-78"><a href="#NodeHandle.__init__-78"><span class="linenos">78</span></a>
</span><span id="NodeHandle.__init__-79"><a href="#NodeHandle.__init__-79"><span class="linenos">79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register</span><span class="p">()</span>
</span><span id="NodeHandle.__init__-80"><a href="#NodeHandle.__init__-80"><span class="linenos">80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_connect_to_neighbors</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="NodeHandle.name" class="classattr">
                                        <input id="NodeHandle.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="NodeHandle.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.name-85"><a href="#NodeHandle.name-85"><span class="linenos">85</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle.name-86"><a href="#NodeHandle.name-86"><span class="linenos">86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NodeHandle.name-87"><a href="#NodeHandle.name-87"><span class="linenos">87</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span></pre></div>


    

                            </div>
                            <div id="NodeHandle.num_neighbors" class="classattr">
                                        <input id="NodeHandle.num_neighbors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">num_neighbors</span><span class="annotation">: int</span>

                <label class="view-source-button" for="NodeHandle.num_neighbors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.num_neighbors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.num_neighbors-89"><a href="#NodeHandle.num_neighbors-89"><span class="linenos">89</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle.num_neighbors-90"><a href="#NodeHandle.num_neighbors-90"><span class="linenos">90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">num_neighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="NodeHandle.num_neighbors-91"><a href="#NodeHandle.num_neighbors-91"><span class="linenos">91</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="NodeHandle.neighbor_names" class="classattr">
                                        <input id="NodeHandle.neighbor_names-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">neighbor_names</span><span class="annotation">: KeysView[str]</span>

                <label class="view-source-button" for="NodeHandle.neighbor_names-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.neighbor_names"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.neighbor_names-93"><a href="#NodeHandle.neighbor_names-93"><span class="linenos">93</span></a>    <span class="nd">@property</span>
</span><span id="NodeHandle.neighbor_names-94"><a href="#NodeHandle.neighbor_names-94"><span class="linenos">94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">neighbor_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KeysView</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="NodeHandle.neighbor_names-95"><a href="#NodeHandle.neighbor_names-95"><span class="linenos">95</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="NodeHandle.send_to_all" class="classattr">
                                        <input id="NodeHandle.send_to_all-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">send_to_all</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">data_to_send</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.send_to_all-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.send_to_all"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.send_to_all-145"><a href="#NodeHandle.send_to_all-145"><span class="linenos">145</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">send_to_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_to_send</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle.send_to_all-146"><a href="#NodeHandle.send_to_all-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.send_to_all-147"><a href="#NodeHandle.send_to_all-147"><span class="linenos">147</span></a><span class="sd">        Sends data to all specified neighbor nodes.</span>
</span><span id="NodeHandle.send_to_all-148"><a href="#NodeHandle.send_to_all-148"><span class="linenos">148</span></a>
</span><span id="NodeHandle.send_to_all-149"><a href="#NodeHandle.send_to_all-149"><span class="linenos">149</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle.send_to_all-150"><a href="#NodeHandle.send_to_all-150"><span class="linenos">150</span></a><span class="sd">            data_to_send (dict[str, NDArray[float64]]): A dictionary mapping neighbor names to the data arrays to send.</span>
</span><span id="NodeHandle.send_to_all-151"><a href="#NodeHandle.send_to_all-151"><span class="linenos">151</span></a>
</span><span id="NodeHandle.send_to_all-152"><a href="#NodeHandle.send_to_all-152"><span class="linenos">152</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.send_to_all-153"><a href="#NodeHandle.send_to_all-153"><span class="linenos">153</span></a><span class="sd">            None</span>
</span><span id="NodeHandle.send_to_all-154"><a href="#NodeHandle.send_to_all-154"><span class="linenos">154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.send_to_all-155"><a href="#NodeHandle.send_to_all-155"><span class="linenos">155</span></a>        <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">data_to_send</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="NodeHandle.send_to_all-156"><a href="#NodeHandle.send_to_all-156"><span class="linenos">156</span></a>            <span class="k">if</span> <span class="n">neighbor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span>
</span><span id="NodeHandle.send_to_all-157"><a href="#NodeHandle.send_to_all-157"><span class="linenos">157</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Neighbor </span><span class="si">{</span><span class="n">neighbor</span><span class="si">}</span><span class="s2"> not found.&quot;</span><span class="p">)</span>
</span><span id="NodeHandle.send_to_all-158"><a href="#NodeHandle.send_to_all-158"><span class="linenos">158</span></a>
</span><span id="NodeHandle.send_to_all-159"><a href="#NodeHandle.send_to_all-159"><span class="linenos">159</span></a>            <span class="n">state_bytes</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
</span><span id="NodeHandle.send_to_all-160"><a href="#NodeHandle.send_to_all-160"><span class="linenos">160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">neighbor</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">state_bytes</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Sends data to all specified neighbor nodes.</p>

<p>Args:
    data_to_send (dict[str, NDArray[float64]]): A dictionary mapping neighbor names to the data arrays to send.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                            <div id="NodeHandle.broadcast" class="classattr">
                                        <input id="NodeHandle.broadcast-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">broadcast</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.broadcast-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.broadcast"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.broadcast-162"><a href="#NodeHandle.broadcast-162"><span class="linenos">162</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">broadcast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NodeHandle.broadcast-163"><a href="#NodeHandle.broadcast-163"><span class="linenos">163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.broadcast-164"><a href="#NodeHandle.broadcast-164"><span class="linenos">164</span></a><span class="sd">        Broadcasts the given state to all neighbor nodes.</span>
</span><span id="NodeHandle.broadcast-165"><a href="#NodeHandle.broadcast-165"><span class="linenos">165</span></a>
</span><span id="NodeHandle.broadcast-166"><a href="#NodeHandle.broadcast-166"><span class="linenos">166</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle.broadcast-167"><a href="#NodeHandle.broadcast-167"><span class="linenos">167</span></a><span class="sd">            state (NDArray[float64]): The state array to broadcast to neighbors.</span>
</span><span id="NodeHandle.broadcast-168"><a href="#NodeHandle.broadcast-168"><span class="linenos">168</span></a>
</span><span id="NodeHandle.broadcast-169"><a href="#NodeHandle.broadcast-169"><span class="linenos">169</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.broadcast-170"><a href="#NodeHandle.broadcast-170"><span class="linenos">170</span></a><span class="sd">            None</span>
</span><span id="NodeHandle.broadcast-171"><a href="#NodeHandle.broadcast-171"><span class="linenos">171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.broadcast-172"><a href="#NodeHandle.broadcast-172"><span class="linenos">172</span></a>        <span class="n">state_bytes</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
</span><span id="NodeHandle.broadcast-173"><a href="#NodeHandle.broadcast-173"><span class="linenos">173</span></a>        <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_addresses</span><span class="p">:</span>
</span><span id="NodeHandle.broadcast-174"><a href="#NodeHandle.broadcast-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_router</span><span class="o">.</span><span class="n">send_multipart</span><span class="p">([</span><span class="n">neighbor</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">state_bytes</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Broadcasts the given state to all neighbor nodes.</p>

<p>Args:
    state (NDArray[float64]): The state array to broadcast to neighbors.</p>

<p>Returns:
    None</p>
</div>


                            </div>
                            <div id="NodeHandle.gather" class="classattr">
                                        <input id="NodeHandle.gather-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gather</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]]</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.gather-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.gather"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.gather-176"><a href="#NodeHandle.gather-176"><span class="linenos">176</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">gather</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]]:</span>
</span><span id="NodeHandle.gather-177"><a href="#NodeHandle.gather-177"><span class="linenos">177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.gather-178"><a href="#NodeHandle.gather-178"><span class="linenos">178</span></a><span class="sd">        Receives and collects data from all neighbors.</span>
</span><span id="NodeHandle.gather-179"><a href="#NodeHandle.gather-179"><span class="linenos">179</span></a>
</span><span id="NodeHandle.gather-180"><a href="#NodeHandle.gather-180"><span class="linenos">180</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.gather-181"><a href="#NodeHandle.gather-181"><span class="linenos">181</span></a><span class="sd">            dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their received data arrays.</span>
</span><span id="NodeHandle.gather-182"><a href="#NodeHandle.gather-182"><span class="linenos">182</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.gather-183"><a href="#NodeHandle.gather-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="NodeHandle.gather-184"><a href="#NodeHandle.gather-184"><span class="linenos">184</span></a>            <span class="n">neighbor</span><span class="p">:</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">dealer</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
</span><span id="NodeHandle.gather-185"><a href="#NodeHandle.gather-185"><span class="linenos">185</span></a>            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">dealer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="NodeHandle.gather-186"><a href="#NodeHandle.gather-186"><span class="linenos">186</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Receives and collects data from all neighbors.</p>

<p>Returns:
    dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their received data arrays.</p>
</div>


                            </div>
                            <div id="NodeHandle.weighted_gather" class="classattr">
                                        <input id="NodeHandle.weighted_gather-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">weighted_gather</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]]</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.weighted_gather-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.weighted_gather"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.weighted_gather-188"><a href="#NodeHandle.weighted_gather-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_gather</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]]:</span>
</span><span id="NodeHandle.weighted_gather-189"><a href="#NodeHandle.weighted_gather-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.weighted_gather-190"><a href="#NodeHandle.weighted_gather-190"><span class="linenos">190</span></a><span class="sd">        Gathers data from all neighbors, applying corresponding weights to each received array.</span>
</span><span id="NodeHandle.weighted_gather-191"><a href="#NodeHandle.weighted_gather-191"><span class="linenos">191</span></a>
</span><span id="NodeHandle.weighted_gather-192"><a href="#NodeHandle.weighted_gather-192"><span class="linenos">192</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.weighted_gather-193"><a href="#NodeHandle.weighted_gather-193"><span class="linenos">193</span></a><span class="sd">            dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their weighted data arrays.</span>
</span><span id="NodeHandle.weighted_gather-194"><a href="#NodeHandle.weighted_gather-194"><span class="linenos">194</span></a><span class="sd">            and multiplied by its associated weight.</span>
</span><span id="NodeHandle.weighted_gather-195"><a href="#NodeHandle.weighted_gather-195"><span class="linenos">195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.weighted_gather-196"><a href="#NodeHandle.weighted_gather-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="NodeHandle.weighted_gather-197"><a href="#NodeHandle.weighted_gather-197"><span class="linenos">197</span></a>            <span class="n">neighbor</span><span class="p">:</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">dealer</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
</span><span id="NodeHandle.weighted_gather-198"><a href="#NodeHandle.weighted_gather-198"><span class="linenos">198</span></a>            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_neighbor_weights</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span>
</span><span id="NodeHandle.weighted_gather-199"><a href="#NodeHandle.weighted_gather-199"><span class="linenos">199</span></a>            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">dealer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dealers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="NodeHandle.weighted_gather-200"><a href="#NodeHandle.weighted_gather-200"><span class="linenos">200</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Gathers data from all neighbors, applying corresponding weights to each received array.</p>

<p>Returns:
    dict[str, NDArray[float64]]: A dictionary mapping neighbor names to their weighted data arrays.
    and multiplied by its associated weight.</p>
</div>


                            </div>
                            <div id="NodeHandle.laplacian" class="classattr">
                                        <input id="NodeHandle.laplacian-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">laplacian</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.laplacian-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.laplacian"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.laplacian-202"><a href="#NodeHandle.laplacian-202"><span class="linenos">202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">laplacian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]:</span>
</span><span id="NodeHandle.laplacian-203"><a href="#NodeHandle.laplacian-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.laplacian-204"><a href="#NodeHandle.laplacian-204"><span class="linenos">204</span></a><span class="sd">        Computes the Laplacian of the given state vector based on the states of neighboring nodes.</span>
</span><span id="NodeHandle.laplacian-205"><a href="#NodeHandle.laplacian-205"><span class="linenos">205</span></a>
</span><span id="NodeHandle.laplacian-206"><a href="#NodeHandle.laplacian-206"><span class="linenos">206</span></a><span class="sd">        The Laplacian is calculated as:</span>
</span><span id="NodeHandle.laplacian-207"><a href="#NodeHandle.laplacian-207"><span class="linenos">207</span></a>
</span><span id="NodeHandle.laplacian-208"><a href="#NodeHandle.laplacian-208"><span class="linenos">208</span></a><span class="sd">            laplacian = state * number_of_neighbors - sum_of_neighbor_states</span>
</span><span id="NodeHandle.laplacian-209"><a href="#NodeHandle.laplacian-209"><span class="linenos">209</span></a>
</span><span id="NodeHandle.laplacian-210"><a href="#NodeHandle.laplacian-210"><span class="linenos">210</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle.laplacian-211"><a href="#NodeHandle.laplacian-211"><span class="linenos">211</span></a><span class="sd">            state (NDArray[float64]): The state vector of the current node.</span>
</span><span id="NodeHandle.laplacian-212"><a href="#NodeHandle.laplacian-212"><span class="linenos">212</span></a>
</span><span id="NodeHandle.laplacian-213"><a href="#NodeHandle.laplacian-213"><span class="linenos">213</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.laplacian-214"><a href="#NodeHandle.laplacian-214"><span class="linenos">214</span></a><span class="sd">            NDArray[float64]: The Laplacian vector representing the difference between the current state and the average state of its neighbors.</span>
</span><span id="NodeHandle.laplacian-215"><a href="#NodeHandle.laplacian-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.laplacian-216"><a href="#NodeHandle.laplacian-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="NodeHandle.laplacian-217"><a href="#NodeHandle.laplacian-217"><span class="linenos">217</span></a>        <span class="n">neighbor_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gather</span><span class="p">()</span>
</span><span id="NodeHandle.laplacian-218"><a href="#NodeHandle.laplacian-218"><span class="linenos">218</span></a>
</span><span id="NodeHandle.laplacian-219"><a href="#NodeHandle.laplacian-219"><span class="linenos">219</span></a>        <span class="n">laplacian</span> <span class="o">=</span> <span class="n">state</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighbor_states</span><span class="p">)</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">neighbor_states</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="NodeHandle.laplacian-220"><a href="#NodeHandle.laplacian-220"><span class="linenos">220</span></a>
</span><span id="NodeHandle.laplacian-221"><a href="#NodeHandle.laplacian-221"><span class="linenos">221</span></a>        <span class="k">return</span> <span class="n">laplacian</span>
</span></pre></div>


            <div class="docstring"><p>Computes the Laplacian of the given state vector based on the states of neighboring nodes.</p>

<p>The Laplacian is calculated as:</p>

<pre><code>laplacian = state * number_of_neighbors - sum_of_neighbor_states
</code></pre>

<p>Args:
    state (NDArray[float64]): The state vector of the current node.</p>

<p>Returns:
    NDArray[float64]: The Laplacian vector representing the difference between the current state and the average state of its neighbors.</p>
</div>


                            </div>
                            <div id="NodeHandle.weighted_mix" class="classattr">
                                        <input id="NodeHandle.weighted_mix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">weighted_mix</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">state</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span></span><span class="return-annotation">) -> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dtype</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="NodeHandle.weighted_mix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NodeHandle.weighted_mix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NodeHandle.weighted_mix-223"><a href="#NodeHandle.weighted_mix-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_mix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">float64</span><span class="p">]:</span>
</span><span id="NodeHandle.weighted_mix-224"><a href="#NodeHandle.weighted_mix-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="NodeHandle.weighted_mix-225"><a href="#NodeHandle.weighted_mix-225"><span class="linenos">225</span></a><span class="sd">        Performs the weighted mixing operation for distributed optimization using the weight matrix W.</span>
</span><span id="NodeHandle.weighted_mix-226"><a href="#NodeHandle.weighted_mix-226"><span class="linenos">226</span></a>
</span><span id="NodeHandle.weighted_mix-227"><a href="#NodeHandle.weighted_mix-227"><span class="linenos">227</span></a><span class="sd">        For a given node i, the mixed state is computed as the i-th row of Wx, where x is the stacked state vector of all nodes.</span>
</span><span id="NodeHandle.weighted_mix-228"><a href="#NodeHandle.weighted_mix-228"><span class="linenos">228</span></a><span class="sd">        If x_i is multi-dimensional, the operation is applied element-wise.</span>
</span><span id="NodeHandle.weighted_mix-229"><a href="#NodeHandle.weighted_mix-229"><span class="linenos">229</span></a><span class="sd">        Specifically:</span>
</span><span id="NodeHandle.weighted_mix-230"><a href="#NodeHandle.weighted_mix-230"><span class="linenos">230</span></a>
</span><span id="NodeHandle.weighted_mix-231"><a href="#NodeHandle.weighted_mix-231"><span class="linenos">231</span></a><span class="sd">            mixed_state = W_ii * state + sum_j(W_ij * neighbor_state_j)</span>
</span><span id="NodeHandle.weighted_mix-232"><a href="#NodeHandle.weighted_mix-232"><span class="linenos">232</span></a>
</span><span id="NodeHandle.weighted_mix-233"><a href="#NodeHandle.weighted_mix-233"><span class="linenos">233</span></a><span class="sd">        where W_ii is self._weight and W_ij are the weights in self._neighbor_weights.</span>
</span><span id="NodeHandle.weighted_mix-234"><a href="#NodeHandle.weighted_mix-234"><span class="linenos">234</span></a>
</span><span id="NodeHandle.weighted_mix-235"><a href="#NodeHandle.weighted_mix-235"><span class="linenos">235</span></a><span class="sd">        Args:</span>
</span><span id="NodeHandle.weighted_mix-236"><a href="#NodeHandle.weighted_mix-236"><span class="linenos">236</span></a><span class="sd">            state (NDArray[float64]): The current state vector of node i.</span>
</span><span id="NodeHandle.weighted_mix-237"><a href="#NodeHandle.weighted_mix-237"><span class="linenos">237</span></a>
</span><span id="NodeHandle.weighted_mix-238"><a href="#NodeHandle.weighted_mix-238"><span class="linenos">238</span></a><span class="sd">        Returns:</span>
</span><span id="NodeHandle.weighted_mix-239"><a href="#NodeHandle.weighted_mix-239"><span class="linenos">239</span></a><span class="sd">            NDArray[float64]: The mixed state vector corresponding to the i-th row of Wx.</span>
</span><span id="NodeHandle.weighted_mix-240"><a href="#NodeHandle.weighted_mix-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="NodeHandle.weighted_mix-241"><a href="#NodeHandle.weighted_mix-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="NodeHandle.weighted_mix-242"><a href="#NodeHandle.weighted_mix-242"><span class="linenos">242</span></a>        <span class="n">weighted_neighbor_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_gather</span><span class="p">()</span>
</span><span id="NodeHandle.weighted_mix-243"><a href="#NodeHandle.weighted_mix-243"><span class="linenos">243</span></a>
</span><span id="NodeHandle.weighted_mix-244"><a href="#NodeHandle.weighted_mix-244"><span class="linenos">244</span></a>        <span class="n">mixed_state</span> <span class="o">=</span> <span class="n">state</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weighted_neighbor_states</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="NodeHandle.weighted_mix-245"><a href="#NodeHandle.weighted_mix-245"><span class="linenos">245</span></a>
</span><span id="NodeHandle.weighted_mix-246"><a href="#NodeHandle.weighted_mix-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="n">mixed_state</span>
</span></pre></div>


            <div class="docstring"><p>Performs the weighted mixing operation for distributed optimization using the weight matrix W.</p>

<p>For a given node i, the mixed state is computed as the i-th row of Wx, where x is the stacked state vector of all nodes.
If x_i is multi-dimensional, the operation is applied element-wise.
Specifically:</p>

<pre><code>mixed_state = W_ii * state + sum_j(W_ij * neighbor_state_j)
</code></pre>

<p>where W_ii is self._weight and W_ij are the weights in self._neighbor_weights.</p>

<p>Args:
    state (NDArray[float64]): The current state vector of node i.</p>

<p>Returns:
    NDArray[float64]: The mixed state vector corresponding to the i-th row of Wx.</p>
</div>


                            </div>
                </section>
                <section id="NodeInput">
                    <div class="attr variable">
            <span class="name">NodeInput</span>        =
<span class="default_value">typing.Iterable[str]</span>

        
    </div>
    <a class="headerlink" href="#NodeInput"></a>
    
    

                </section>
                <section id="EdgeInput">
                    <div class="attr variable">
            <span class="name">EdgeInput</span>        =
<span class="default_value">typing.Iterable[tuple[str, str]]</span>

        
    </div>
    <a class="headerlink" href="#EdgeInput"></a>
    
    

                </section>
                <section id="NodeView">
                    <div class="attr variable">
            <span class="name">NodeView</span>        =
<span class="default_value">typing.Collection[str]</span>

        
    </div>
    <a class="headerlink" href="#NodeView"></a>
    
    

                </section>
                <section id="EdgeView">
                    <div class="attr variable">
            <span class="name">EdgeView</span>        =
<span class="default_value">typing.Collection[tuple[str, str]]</span>

        
    </div>
    <a class="headerlink" href="#EdgeView"></a>
    
    

                </section>
                <section id="AdjView">
                    <div class="attr variable">
            <span class="name">AdjView</span>        =
<span class="default_value">typing.Mapping[str, typing.Mapping[str, float]]</span>

        
    </div>
    <a class="headerlink" href="#AdjView"></a>
    
    

                </section>
    </main>
</body>
</html>